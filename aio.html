<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Packaging: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/intersect/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/intersect/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/intersect/favicon-16x16.png">
<link rel="manifest" href="favicons/intersect/site.webmanifest">
<link rel="mask-icon" href="favicons/intersect/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav intersect"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="intersect-logo" alt="Packaging" src="assets/images/intersect-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav intersect" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Packaging" src="assets/images/intersect-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Packaging
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Packaging
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Packaging
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress intersect">
    <div class="progress-bar intersect" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="environment.html">1. Environments and task runners</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="code-to-package.html">2. Code to Package</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="other-files.html">3. Other files that belong with your package</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="metadata.html">4. Metadata</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="versioning.html">5. Versioning</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="publishing.html">6. Publishing package and citation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="documentation.html">7. Documentation Overview</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="documentation-sphinx.html">8. Documentation with Sphinx</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="documentation-mkdocs-material.html">9. Documentation with MkDocs</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="checks.html">10. Checks and tests</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="task-runners.html">11. Task runners</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="continuous-integration.html">12. Continuous Integration</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>

                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-environment"><p>Content from <a href="environment.html">Environments and task runners</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/environment.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you install and manage packages?</li>
<li>How can you ensure others run the same code you do?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about virtual environments</li>
<li>Use a task runner to manage environments and run code</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One of Python’s biggest strengths is its ecosystem of packages which
build upon and extend the capabilities offered by the standard
library.</p>
<p>We’ll look at how: - You should use virtual environments to manage
the dependencies of different projects, - You can install packages you
want to build on using <code>pip</code>, and - You can install Python
applications you just want to use using <code>pipx</code>.</p>
<section><h2 class="section-heading" id="creating-and-activatingdeactivating-a-virtual-environment">Creating and Activating/Deactivating a Virtual Environment<a class="anchor" aria-label="anchor" href="#creating-and-activatingdeactivating-a-virtual-environment"></a>
</h2>
<hr class="half-width">
<p>Whenever we’re developing or working in Python, the best practice is
to use a “virtual environment” which isolates the packages used for a
particular project.</p>
<p>Python 3 comes with the <code>venv</code> module built-in, which
supports making virtual environments. To make one, you call the module
with:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> venv .venv</span></code></pre>
</div>
<p>This creates a new directory <code>.venv</code> containing: -
<code>.venv/bin</code> - A link to the Python version, - A link to the
Python package installer <code>pip</code>, and - activation scripts. -
<code>.venv/lib/site-packages</code> where packages will be
installed.</p>
<p>To activate the environment, source the activation script:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">.</span> .venv/bin/activate</span></code></pre>
</div>
<p>Now <code>.venv/bin</code> has been added to your PATH, and usually
your shell’s prompt will be modified to indicate you are “in” a virtual
environment:</p>
<pre><code>% . .venv/bin/activate
(.venv) %</code></pre>
<div id="upgrade-pip" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="upgrade-pip" class="callout-inner">
<h3 class="callout-title">Upgrade <code>pip</code>
</h3>
<div class="callout-content">
<p>Check the version of pip installed! If it’s old, you might want to
run <code>pip install --upgrade pip</code> or, for Python 3.9 or later,
you can add <code>--upgrade-deps</code> to the venv creation line.</p>
</div>
</div>
</div>
<p>To “leave” the virtual environment, you undo those changes by running
the deactivate function the activation added to your shell:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">deactivate</span></span></code></pre>
</div>
<p>The prompt will revert:</p>
<pre><code>(.venv) % deactivate
%</code></pre>
<div id="alternatives" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="alternatives" class="callout-inner">
<h3 class="callout-title">Alternatives</h3>
<div class="callout-content">
<p>There are several alternatives that provide the same experience, but
offer some speed or update benefits. The installable
<code>virtualenv</code> package provides the same interface as the
built-in <code>venv</code>, but is faster, has more options, and has
up-to-date embedded pip.</p>
<p>Another alternative is <code>uv</code>, which is written in Rust, and
<code>uv venv</code> is actually faster than Python can even start up,
though it doesn’t install pip by default (since you are supposed to use
<code>uv pip</code>).</p>
<p>Use the tool you prefer; the resulting venv works identically.</p>
</div>
</div>
</div>
<div id="what-about-conda" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-about-conda" class="callout-inner">
<h3 class="callout-title">What about conda?</h3>
<div class="callout-content">
<p>The same concerns apply to Conda. You should always make separate
environments and use those. Quick tips:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--set</span> auto_activate_base false  <span class="co"># turn off the default environment</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">-n</span> some_name  <span class="co"># or use paths with `-p`</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="ex">conda</span> activate some_name</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="ex">conda</span> deactivate</span></code></pre>
</div>
<p>Alternative implementations of <code>conda</code> are available and
may be faster, like: - <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html" class="external-link">Micromamba</a>
a single binary, also written in C++, - <a href="https://github.com/prefix-dev/pixi" class="external-link">Pixi</a> written in Rust.</p>
<p><a href="https://github.com/mamba-org/mamba" class="external-link">Mamba</a>, written in
C++, became very popular as its package resolver was much faster than
the default in <code>conda</code>. In 2023, <code>conda</code>
incorporated the <code>libmamba</code> package resolver as its default,
largely eliminating the speed difference between <code>conda</code> and
<code>mamba</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="installing-packages">Installing Packages<a class="anchor" aria-label="anchor" href="#installing-packages"></a>
</h2>
<hr class="half-width">
<p>To install a package, first make sure the environment is activated
using <code>. .venv/bin/activate</code> first, then call:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="op">&lt;</span>package<span class="op">&gt;</span></span></code></pre>
</div>
<div id="install-numpy" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="install-numpy" class="callout-inner">
<h3 class="callout-title">Install <code>numpy</code>
</h3>
<div class="callout-content">
<ul>
<li>Install the numpy package into your virtual environment.</li>
<li>Test it by opening a Python session and running
<code>import numpy as np</code> then
<code>np.arange(15).reshape(3, 5)</code>.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<pre><code>% . .venv/bin/activate
(.venv) % pip install numpy
(.venv) % python
Python 3.12.3 (main, Apr  9 2024, 08:09:14) [Clang 15.0.0 (clang-1500.3.9.4)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; np.arange(15).reshape(3, 5)
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])
&gt;&gt;&gt; exit()
(.venv) %</code></pre>
</div>
</div>
</div>
</div>
<div id="installing-packages-in-the-base-and-user-environment" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="installing-packages-in-the-base-and-user-environment" class="callout-inner">
<h3 class="callout-title">Installing Packages in the “base” and “user” environment</h3>
<div class="callout-content">
<p>Be careful installing packages without an activated virtual
environment.</p>
<p>You will see two <em>very</em> common recommendations when installing
a package, neither of which you should use unless you know what you’re
doing:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="op">&lt;</span>package<span class="op">&gt;</span>         <span class="co"># Use only in virtual environment!</span></span></code></pre>
</div>
<p>Unless you’ve activated a virtual environment, this will try to
install globally, and if you don’t have permission, will install to your
user site packages. In global site packages, you can get conflicting
versions of libraries, you can’t tell what you’ve installed for what,
packages can update and break your system; it’s a mess. This is the
<em>“update problem”</em>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">--user</span> <span class="op">&lt;</span>package<span class="op">&gt;</span>  <span class="co"># Almost never use</span></span></code></pre>
</div>
<p>This will install in your user directory. This is even worse worse,
because all installs of Python on your computer share it, so you might
override and break things you didn’t intend to. And with pip’s new smart
solver, updating packages inside a global environment can take many
minutes and produce unexpectedly solves that are technically “correct”
but don’t work because it backsolved conflicts to before issues were
discovered.</p>
<p>There is a solution: virtual environments (libraries) or pipx
(applications).</p>
<p>There are likely a <em>few</em> libraries (ideally just
<code>pipx</code>) that you just have to install globally. Go ahead, but
be careful, and always use your system package manager instead if you
can, like - <a href="https://brew.sh" class="external-link"><code>brew</code> on macOS</a>, -
<a href="https://learn.microsoft.com/en-us/windows/package-manager/winget/" class="external-link"><code>winget</code></a>
or <a href="https://scoop.sh/" class="external-link"><code>scoop</code></a> on Windows, -
<code>apt-get</code> on Ubuntu.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="installing-applications">Installing Applications<a class="anchor" aria-label="anchor" href="#installing-applications"></a>
</h2>
<hr class="half-width">
<p>There are many Python packages that provide a command line interface
and are not really intended to be imported (<code>pip</code>, for
example, should not be imported). It is really inconvenient to have to
set up venvs for every command line tool you want to install, however.
<a href="https://pipx.pypa.io/" class="external-link"><code>pipx</code></a>, from the makers
of <code>pip</code>, solves this problem for you.</p>
<p>If you <code>pipx install</code> a package, it will be created inside
a new virtual environment, and just the executable scripts will be
exposed in your regular shell.</p>
<p>Pipx also has a <code>pipx run &lt;package&gt;</code> command, which
will download a package and run a script of the same name, and will
cache the temporary environment for a week. This means you have all of
PyPI at your fingertips in one line on any computer that has pipx
installed!</p>
<div id="install-pipx-and-cowsay" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="install-pipx-and-cowsay" class="callout-inner">
<h3 class="callout-title">Install <code>pipx</code> and
<code>cowsay</code>
</h3>
<div class="callout-content">
<ul>
<li>Install <code>pipx</code> by following the <a href="https://pipx.pypa.io/" class="external-link">installation instructions</a>.</li>
<li>Test it by running
<code>pipx run cowsay -t "venvs are the foo\!"</code>
</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Ubuntu Linux:</p>
<pre class="command"><code>sudo apt update
sudo apt install pipx
pipx ensurepath</code></pre>
<p>macOS:</p>
<pre class="command"><code>brew install pipx
pipx ensurepath</code></pre>
<p>Then:</p>
<pre class="command"><code>% pipx run cowsay -t "venvs are the foo\!"
  __________________
| venvs are the foo! |
  ==================
                  \
                   \
                     ^__^
                     (oo)\_______
                     (__)\       )\/\
                         ||----w |
                         ||     ||</code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Virtual environments isolate software</li>
<li>Virtual environments solve the update problem</li>
<li>A task runner makes it easier to contribute to software</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-code-to-package"><p>Content from <a href="code-to-package.html">Code to Package</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/code-to-package.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we take code and turn that into a package?</li>
<li>What are the minimum elements required for a Python package?</li>
<li>How do you set up tests?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create and install a Python package</li>
<li>Create and run a test</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Much research software is initially developed by hacking away in an
interactive setting, such as in a <a href="https://jupyter.org" class="external-link">Jupyter
Notebook</a> or a Python shell. However, at some point when you have a
more-complicated workflow that you want to repeat, and/or make available
to others, it makes sense to package your functions into modules and
ultimately a software package that can be installed. This lesson will
walk you through that process.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<ul>
<li>Ensure you’re in an empty git repository (see <a href="index.html#setup">Setup</a> for details).</li>
<li>Ensure you’ve created and activated your virtual environment (see <a href="environment.html">Environment</a> for details):</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="bu">.</span> .venv/bin/activate</span></code></pre>
</div>
</div>
</div>
</div>
<p>Consider the <code>rescale()</code> function written as an exercise
in the Software Carpentry <a href="https://swcarpentry.github.io/python-novice-inflammation/08-func/index.html" class="external-link">Programming
with Python</a> lesson.</p>
<p>Install NumPy:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">pip</span> install numpy</span></code></pre>
</div>
<p>Then, in a Python shell or Jupyter Notebook, declare the
function:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">def</span> rescale(input_array):</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="co">"""Rescales an array from 0 to 1.</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">    Takes an array as input, and returns a corresponding array scaled so that 0</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">    corresponds to the minimum and 1 to the maximum value of the input array.</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    low <span class="op">=</span> np.<span class="bu">min</span>(input_array)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    high <span class="op">=</span> np.<span class="bu">max</span>(input_array)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    output_array <span class="op">=</span> (input_array <span class="op">-</span> low) <span class="op">/</span> (high <span class="op">-</span> low)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="cf">return</span> output_array</span></code></pre>
</div>
<p>and call the function with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>rescale(np.linspace(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">5</span>))</span></code></pre>
</div>
<p>which provides the output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([ 0.  ,  0.25,  0.5 ,  0.75,  1.  ])</code></pre>
</div>
<section><h2 class="section-heading" id="create-a-minimal-package">Create a minimal package<a class="anchor" aria-label="anchor" href="#create-a-minimal-package"></a>
</h2>
<hr class="half-width">
<p>Let’s create a Python package that contains this function.</p>
<p>Create the necessary directory structure for your package. This
includes: - a <code>src</code> (“source”) directory, which will contain
another directory called <code>package</code> for the source files of
your package itself, - a <code>tests</code> directory, which will hold
tests for your package and its modules/functions, - a <code>docs</code>
directory, which will hold the files necessary for documenting your
software package.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> src/example_package_YOUR_USERNAME_HERE tests docs</span></code></pre>
</div>
<p>(The <code>-p</code> flag tells <code>mkdir</code> to create the
<code>src</code> parent directory for
<code>example_package_YOUR_USERNAME_HERE</code>.)</p>
<div id="package-naming" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="package-naming" class="callout-inner">
<h3 class="callout-title">Package naming</h3>
<div class="callout-content">
<p>The PEP8 style guide recommends short, all-lowercase package names.
The use of underscores is also discouraged.</p>
<p>It’s a good idea to keep package names short so that it is easier to
remember and type. We are straying from this convention in this tutorial
to prevent naming conflicts.</p>
</div>
</div>
</div>
<div id="directory-structure" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="directory-structure" class="callout-inner">
<h3 class="callout-title">Directory Structure</h3>
<div class="callout-content">
<p>Putting the package directory and source code inside the
<code>src</code> directory is not actually <em>required</em>. - If you
put the <code>&lt;package_name&gt;</code> directory at the same level as
<code>tests</code> and <code>docs</code> then you could actually import
or call the package directory from that location. - However, this can
cause several issues, such as running tests with the local version
instead of the installed version. - In addition, the <code>src/</code>
package structure matches that of compiled languages, and lets your
package easily contain non-Python compiled code, if necessary.</p>
</div>
</div>
</div>
<p>Inside <code>src/example_package_YOUR_USERNAME_HERE</code>, create
the files <code>__init__.py</code> and <code>rescale.py</code>:</p>
<ul>
<li>
<p><code>__init__.py</code> is required to import this directory as
a package, and should remain empty (for now).</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> touch src/example_package_YOUR_USERNAME_HERE/__init__.py</span></code></pre>
</div>
</li>
<li>
<p><code>rescale.py</code> is the module inside this package that
will contain the <code>rescale()</code> function;</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> touch src/example_package_YOUR_USERNAME_HERE/rescale.py</span></code></pre>
</div>
</li>
</ul>
<p>Copy the <code>rescale()</code> function into <code>rescale.py</code>
file. (Don’t forget the NumPy import!)</p>
<p>The last element your package needs is a <code>pyproject.toml</code>
file. Create this with</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> touch pyproject.toml</span></code></pre>
</div>
<p>and then provide the minimally required metadata, which include -
information about the package itself (<code>name</code>,
<code>version</code> and <code>dependencies</code>) and - build system
(hatchling):</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># contents of pyproject.toml</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">[build-system]</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="dt">requires</span> <span class="op">=</span> <span class="op">[</span><span class="st">"hatchling"</span><span class="op">]</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="dt">build-backend</span> <span class="op">=</span> <span class="st">"hatchling.build"</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">"example-package-YOUR-USERNAME-HERE"</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"0.1.0"</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>  <span class="st">"numpy"</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>The package name given here, “package,” matches the directory
<code>src/package</code> that contains the code. We’ve chosen 0.1.0 as
the starting version for this package; you’ll see more in a later
episode about versioning, and how to specify this without manually
writing it here.</p>
<div id="build-backend" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="build-backend" class="callout-inner">
<h3 class="callout-title">Build Backend</h3>
<div class="callout-content">
<p>The build backend is a program which will convert the source files
into a package ready for distribution. It determines how your project
will specify its configuration, metadata and files. You should choose
one that suits your preferences.</p>
<p>We selected a specific backend - hatching. It had a good default
configuration, is fast, has some powerful features, and supports a
growing ecosystem of plugins. There are other backends too, including
ones for <a href="https://learn.scientific-python.org/development/guides/packaging-compiled" class="external-link">compiled
projects</a>.</p>
</div>
</div>
</div>
<div id="minimal-working-package" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="minimal-working-package" class="callout-inner">
<h3 class="callout-title">Minimal Working Package</h3>
<div class="callout-content">
<p>The only elements of your package strictly <em>required</em> to
install and import it are the <code>pyproject.toml</code>,
<code>__init__.py</code>, and <code>rescale.py</code> files.</p>
</div>
</div>
</div>
<p>At this point, your package’s file structure should look like
this:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">├──</span> docs/</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="ex">├──</span> pyproject.toml</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="ex">├──</span> src/</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="ex">│</span>   └── example_package_YOUR_USERNAME_HERE/</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="ex">│</span>   │   ├── __init__.py</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="ex">│</span>   │   └── rescale.py</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="ex">├──</span> tests/</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="ex">└──</span> .venv/</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="installing-and-using-your-package">Installing and using your package<a class="anchor" aria-label="anchor" href="#installing-and-using-your-package"></a>
</h2>
<hr class="half-width">
<p>Now that your package has the necessary elements, you can install it
into your virtual environment (which should already be active). From the
top level of your project’s directory, enter:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> pip install <span class="at">--editable</span> .</span></code></pre>
</div>
<p>The <code>--editable</code> flag tells <code>pip</code> to install in
editable mode, meaning that you can continue developing your package on
your computer as you test it. Note, you will often see the short option
<code>-e</code>.</p>
<p>Then, in a Python shell or Jupyter Notebook, import your package and
call the (single) function:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="im">from</span> example_package_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>rescale(np.linspace(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">5</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([0.  , 0.25, 0.5 , 0.75, 1.  ])</code></pre>
</div>
<p>This matches the output we expected based on our interactive testing
above! 😅</p>
</section><section><h2 class="section-heading" id="your-first-test">Your first test<a class="anchor" aria-label="anchor" href="#your-first-test"></a>
</h2>
<hr class="half-width">
<p>Now that we have installed our package and we have manually tested
that it works, let’s set up this situation as a test that can be
automatically run using <code>pytest</code>.</p>
<p>In the <code>tests</code> directory, create the
<code>test_rescale.py</code> file:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">touch</span> tests/test_rescale.py</span></code></pre>
</div>
<p>In this file, we need to import the package, and check that a call to
the <code>rescale</code> function with our known input returns the
expected output:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># contents of tests/test_rescale.py</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="im">from</span> example_package_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="kw">def</span> test_rescale():</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>    np.testing.assert_allclose(</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>        rescale(np.linspace(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">5</span>)),</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>        np.array([<span class="fl">0.0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">1.0</span>]),</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>    )</span></code></pre>
</div>
<p>To use pytest to run this (and other tests), we need to install
<code>pytest</code>.</p>
<p>Here we add it to the <code>pyproject.toml</code> file, by adding a
block below the dependencies with an “extra” called
<code>test</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="dt">...</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="st">"numpy"</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="kw">[project.optional-dependencies]</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="dt">test</span> <span class="op">=</span> <span class="op">[</span><span class="st">"pytest"</span><span class="op">]</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="kw">[build-system]</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="dt">...</span></span></code></pre>
</div>
<p>You install the project with the “extra” using:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">--editable</span> <span class="st">".[test]"</span></span></code></pre>
</div>
<p>You can run the tests using <code>pytest</code>:</p>
<pre><code>(.venv) % pytest
======================== test session starts ========================
platform darwin -- Python 3.12.3, pytest-8.2.1, pluggy-1.5.0
rootdir: /Users/john/Developer/packaging-example
configfile: pyproject.toml
collected 1 item

tests/test_rescale.py .                                       [100%]

========================= 1 passed in 0.14s =========================</code></pre>
<p>This tells us that the output of the test function matches the
expected result, and therefore the test passes! 🎉</p>
</section><section><h2 class="section-heading" id="commit-and-push">Commit and Push<a class="anchor" aria-label="anchor" href="#commit-and-push"></a>
</h2>
<hr class="half-width">
<p>Don’t forget to commit all your work using <code>git</code>. (In the
rest of the lesson, we won’t remind you to do this, but you should still
make small commits regularly.)</p>
<p>Commit the relevant files, first the code:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">git</span> add src/example_package_YOUR_USERNAME_HERE/<span class="dt">{__init__</span><span class="op">,</span><span class="dt">rescale}</span>.py</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">git</span> add tests/test_rescale.py</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"feat: add basic rescaling function</span></span></code></pre>
</div>
<p>… then the metadata:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">git</span> add pyproject.toml</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"build: add minimal pyproject.toml"</span></span></code></pre>
</div>
<p>… then push those to the <code>origin</code> remote repository.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
<div id="always-git-add-individual-files-until-youve-set-up-your-.gitignore" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="always-git-add-individual-files-until-youve-set-up-your-.gitignore" class="callout-inner">
<h3 class="callout-title">Always <code>git add</code> individual files
until you’ve set up your <code>.gitignore</code>
</h3>
<div class="callout-content">
<p>When working with git, it’s best to - stage <strong>individual
files</strong> using <code>git add FILENAME ...</code>, - check what
you’re about to commit using <code>git status</code>, before you -
commit with <code>git commit -m "COMMIT MESSAGE"</code>.</p>
<p>You can also use a graphical tool which makes it easy to see at a
glance what is is you’re committing.</p>
<p>Adding a <code>.gitignore</code> file (which we’ll cover later), will
help avoid inadvertently committing files like the virtual environment
directory, and is a prerequisite for using <code>git commit -a</code>
which commits everything.</p>
</div>
</div>
</div>
<div id="conventional-commits" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="conventional-commits" class="callout-inner">
<h3 class="callout-title">Conventional commits</h3>
<div class="callout-content">
<p>In this example, we use <a href="https://www.conventionalcommits.org/" class="external-link">conventional commit
messages</a> which look like
<code>&lt;type&gt;: &lt;description&gt;</code>.</p>
<p>Each commit should do one and only one “thing” to the code, for
instance: - add a new feature (type: <code>feat</code>), <em>or</em> -
fix a bug (type: <code>fix</code>), <em>or</em> - rename a function
(type: <code>refactor</code>), <em>or</em> - add documentation (type:
<code>docs</code>), <em>or</em> - change something affecting the build
system (type: <code>build</code>).</p>
<p>By doing only one thing per commit, it’s easier to: - write the
commit message, - understand the history by looking at the
<code>git log</code>, and - revert individual changes you later decide
could be done in a better way.</p>
</div>
</div>
</div>
<div id="check-your-package" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="check-your-package" class="callout-inner">
<h3 class="callout-title">Check your package</h3>
<div class="callout-content">
<p>Check that you can install your package and that it works as
expected.</p>
<p>If everything works, you should be able to install your package (in a
new virtual environment):</p>
<pre><code>python3 -m venv .venv2
. .venv2/bin/activate
python3 -m pip install git+https://github.com/&lt;your github username&gt;/example-package-YOUR-USERNAME-HERE</code></pre>
<p>Open a python console and call the rescale function with some
data.</p>
<p>Switch back to the original virtual environment before going onto the
next lesson:</p>
<pre><code>. .venv/bin/activate</code></pre>
</div>
</div>
</div>
<p>You now have a package that is: - installed in editable mode in an
isolated environment, - can be interacted with in tests and in an
interactive console, and - has a passing test.</p>
<p>Next, we’ll look at other files that should be included with your
package.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Put your code and tests in a standard package structure</li>
<li>Use a <code>pyproject.toml</code> file to describe a Python
package</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-other-files"><p>Content from <a href="other-files.html">Other files that belong with your package</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/other-files.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What other files are important parts of your software package?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a README for a software package</li>
<li>Add a software LICENSE to a software package</li>
<li>Create a CHANGELOG for a package</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We now have an installed, working Python package that provides some
functionality. Are we ready to push the code to GitHub (or your
preferred code hosting service) for others to use and contribute to? 🛑
Not quite—we need to add a few more files at minimum to describe our
package, and to actually make it open-source software.</p>
<p>Aside from the name of the package and docstring included with the
(single) function, we haven’t yet provided any description or other
information about the package for anybody that comes across it.</p>
<p>We also haven’t specified the terms and conditions under which the
software may be downloaded, used, and/or modified. This means that if we
posted it online right now, due to copyright laws (in the United States,
at least) nobody else would actually be able to use or modify the code,
since we haven’t given explicit permission to do so.</p>
<p>Lastly, as you continue working on your package, you will likely fix
bugs and modify/add/remove functionality. Although these changes will
<em>technically</em> be present in your Git logs—because you are
committing regularly and writing descriptive commit messages, right?
😉—you should also maintain a file that describes these changes in a
human-readable way.</p>
<section><h2 class="section-heading" id="creating-a-readme">Creating a README<a class="anchor" aria-label="anchor" href="#creating-a-readme"></a>
</h2>
<hr class="half-width">
<p>A README is a plaintext file that sits at the top level of your
package (next to the <code>src</code>, <code>tests</code>,
<code>docs</code> directories and <code>pyproject.toml</code> file) and
provides general information about your software. Modern READMEs are
typically written in Markdown, or occasionally reStructuredText (ReST),
due to the additional formatting options that services like GitHub
nicely render.</p>
<p>A README is a form of software documentation, and should contain at
minimum: - the name of your software package - a brief description of
what your software does or provides - installation instructions - a
brief usage example - the type of software license (with more
information in a separate <code>LICENSE</code> file, described next)</p>
<p>In addition, a README may also contain: - badges near the top that
quickly show key information, such as the latest version, whether the
tests are currently passing - information about how people can
contribute to your package - a <a href="https://www.contributor-covenant.org" class="external-link">code of conduct</a> for
people interacting around your project (in GitHub Issues or Pull
Requests, for example) - contact information for authors and/or
maintainers</p>
<p>Create a README using</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> touch README.md</span></code></pre>
</div>
<p>and then add these elements:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu"># Example Example Package YOUR USERNAME HERE YOUR USERNAME HERE</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="in">`example-example-package-YOUR-USERNAME-HERE-YOUR-USERNAME-HERE`</span> is a simple Python library that contains a single function for rescaling arrays.</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">## Installation</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>Download the source code and use the package manager <span class="co">[</span><span class="ot">pip</span><span class="co">](https://pip.pypa.io/en/stable/)</span> to install <span class="in">`package`</span>:</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="ex">pip</span> install .</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="fu">## Usage</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="im">from</span> example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co"># rescales over 0 to 1</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>rescale(np.linspace(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="fu">## Contributing</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>Please make sure to update tests as appropriate.</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="fu">## License</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a>TBD</span></code></pre>
</div>
<p>You can see more guidance on creating READMEs at <a href="https://www.makeareadme.com" class="external-link uri">https://www.makeareadme.com</a>.</p>
<div id="keep-your-readmes-relatively-brief" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keep-your-readmes-relatively-brief" class="callout-inner">
<h3 class="callout-title">Keep your READMEs relatively brief</h3>
<div class="callout-content">
<p>You should try to keep your README files <em>relatively</em> brief,
rather than including very detailed documentation to this file. This
should only be a high-level introduction, with detailed theory,
examples, and other information reserved for a true documentation
website.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="choosing-a-software-license">Choosing a software license<a class="anchor" aria-label="anchor" href="#choosing-a-software-license"></a>
</h2>
<hr class="half-width">
<p>Now, your package includes a README file, which tells someone who
finds the source code a bit about how to use your project and also
contribute to it. However, you still need one more element before
uploading it to GitHub or another code-hosting service: a
<strong>software license</strong> that explicitly gives specific
permissions to users and contributors. Simply making your project
available publicly is not the same as making it an open-source software
project.</p>
<p>By default, when you make a creative work such as software (but also
including writing and images), your work is under exclusive copyright.
Others cannot use, copy, share/distribute, or modify your work without
your permission. This is often a good thing, because it means you can
put your work out into the world, and copyright protects you as the
creator and owner of the work. Open Source Guides has more about the <a href="https://opensource.guide/legal/" class="external-link">legal side of open source
software</a>.</p>
<p>However, if you have created research software and plan to share it
openly, you <em>want</em> others to use your software, and possibly
contribute to it. (Who doesn’t love having other people fix the bugs in
their code?)</p>
<p>A software license provides the explicit permissions for others to
use, modify, or share your code, and lays out the specific rules for any
restrictions about how they can do those things. To pick a license, use
resources like <a href="https://choosealicense.com" class="external-link">Choose a License</a>
or <a href="https://wiki.civiccommons.org/Choosing_a_License/" class="external-link">Civic
Commons “Choosing a License”</a> based on how you want others to
interact with your software. You can also see the <a href="https://opensource.org/licenses/category" class="external-link">full list of open-source
licenses</a> approved by the Open Source Initiative, which maintains the
Open Source Definition.</p>
<p>For a new project, you essentially have one major choice to make: 1.
Do you want to allow others to use your software in almost any way they
want, or 2. Do you want to require others to share any uses of your
project in an open way?</p>
<p>These two categories are “permissive” and “copyleft” licenses. Common
permissive licenses include the <a href="https://choosealicense.com/licenses/mit/" class="external-link">MIT License</a> and <a href="https://choosealicense.com/licenses/bsd-3-clause/" class="external-link">BSD 3-Clause
License</a>. The <a href="https://choosealicense.com/licenses/gpl-3.0/" class="external-link">GNU General Public
License v3.0 (or GNU GPLv3) License</a> is a common copyleft
license.</p>
<p>Most research software uses permissive licenses like the: - <a href="https://choosealicense.com/licenses/bsd-3-clause/" class="external-link">BSD 3-Clause
License</a> which includes a specific clause preventing the names of
creators/contributors from being used to endorse or promote derivatives,
without permission, - <a href="https://choosealicense.com/licenses/mit/" class="external-link">MIT License</a>, or the
- <a href="https://choosealicense.com/licenses/apache-2.0/" class="external-link">Apache
License 2.0</a>.</p>
<p>In addition, when working on a project with others or as part of a
larger effort, you should check if your collaborators have already
determined an appropriate license; for example, on work funded by a
grant, a particular license may be mandated by the
proposal/agreement.</p>
<p>Create a <code>LICENSE</code> file using</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> touch LICENSE</span></code></pre>
</div>
<p>and copy the <strong>exact</strong> text of the license you chose,
modifying only the year and names.</p>
<p>For instance, for the <a href="https://choosealicense.com/licenses/bsd-3-clause/" class="external-link">BSD 3-Clause
License</a>:</p>
<pre><code>BSD 3-Clause License

Copyright (c) [year], [fullname]

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its
   contributors may be used to endorse or promote products derived from
   this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</code></pre>
<p>That’s it!</p>
<div id="do-not-write-your-own-license" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="do-not-write-your-own-license" class="callout-inner">
<h3 class="callout-title">Do not write your own license!</h3>
<div class="callout-content">
<p>You should never try to write your own software license, or modify
the text of an existing license.</p>
<p>Although <em>we</em> are not lawyers, the licenses approved and
maintained by the Open Source Initiative have gone through a rigorous
review process, including legal review, to ensure that they are both
consistent with the Open Source Definition and also are legally
valid.</p>
</div>
</div>
</div>
<div id="adding-a-license-badge-to-readme" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="adding-a-license-badge-to-readme" class="callout-inner">
<h3 class="callout-title">Adding a license badge to README</h3>
<div class="callout-content">
<p>Badges are a fun and informative way to quickly show information
about your software package in the README. <a href="https://shields.io" class="external-link">Shields.io</a> is a resource for generating
badge images in SVG format, which can easily be added to the top of your
README as links pointing to more information.</p>
<p>Using <a href="https://shields.io" class="external-link">Shields.io</a> (or an example
found elsewhere), generate the Markdown syntax for adding a badge
describing the BSD 3-Clause License we chose for this example
package.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The Markdown syntax for adding a badge describing the BSD 3-Clause
License is:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">[</span><span class="al">![License](https://img.shields.io/badge/license-BSD-green.svg)</span><span class="co">](https://opensource.org/licenses/BSD-3-Clause)</span></span></code></pre>
</div>
<p>and will render as <a href="https://opensource.org/licenses/BSD-3-Clause" class="external-link"><img src="https://img.shields.io/badge/license-BSD-green.svg" alt="" class="figure"></a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="keeping-a-changelog">Keeping a CHANGELOG<a class="anchor" aria-label="anchor" href="#keeping-a-changelog"></a>
</h2>
<hr class="half-width">
<p>Over time, our package will likely evolve, whether through bug fixes,
improvements, or feature changes. For example, the <code>rescale</code>
function in our package does not have a way of properly treating cases
where the max and min of the array are the same (i.e., when the array
holds the same number repeated). For example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">from</span> example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.ones(<span class="dv">5</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>rescale(a)</span></code></pre>
</div>
<p>gives</p>
<pre><code>rescale.py:11: RuntimeWarning: invalid value encountered in divide
  output_array = (input_array - low) / (high - low)
array([nan, nan, nan, nan, nan])</code></pre>
<p>{: .output}</p>
<p>This is probably not the desired output; instead, let’s say we want
to rescale all the values in this array to 1. We can modify the function
to properly handle this situation:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">def</span> rescale(input_array):</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">"""Rescales an array from 0 to 1.</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">    Takes an array as input, and returns a corresponding array scaled so that 0</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">    corresponds to the minimum and 1 to the maximum value of the input array.</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    low <span class="op">=</span> np.<span class="bu">min</span>(input_array)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    high <span class="op">=</span> np.<span class="bu">max</span>(input_array)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    <span class="cf">if</span> np.allclose(low, high):</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>        output_array <span class="op">=</span> input_array <span class="op">/</span> low</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>        output_array <span class="op">=</span> (input_array <span class="op">-</span> low) <span class="op">/</span> (high <span class="op">-</span> low)</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>    <span class="cf">return</span> output_array</span></code></pre>
</div>
<p>Now, when we call rescale (no need to reinstall or upgrade the
package, since we previously installed using editable mode):</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">from</span> example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.ones(<span class="dv">5</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>rescale(a)</span></code></pre>
</div>
<p>we get the desired behavior:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([1., 1., 1., 1., 1.])</code></pre>
</div>
<p>Great! Let’s commit that change using Git, with a message and perhaps
update the version to 0.1.1 to indicate the package has changed (more to
come on that in a later episode on versioning).</p>
<p>That may be enough for us to record the change, but how will a user
of your package know that the functionality has changed? It’s not
exactly easy to hunt through Git logs and try to find which commit
message(s) align with the changes since the last version.</p>
<p>Instead, we can <a href="https://keepachangelog.com" class="external-link">keep a
changelog</a> in a <code>CHANGELOG.md</code> file, also at the top level
of your package’s directory. In this Markdown-formatted file, you should
record major changes to the package made since the last released
version. Then, when you decide to release a new version, you add a new
section to the file above this list of changes.</p>
<p>Changes should be grouped together based on the type; suggestions for
these come from the <a href="https://keepachangelog.com/en/1.0.0/" class="external-link">Keep
a Changelog project</a> by <a href="https://olivierlacan.com/" class="external-link">Olivier
Lacan</a>: - <code>Added</code> for new features, - <code>Changed</code>
for changes in existing functionality, - <code>Deprecated</code> for
soon-to-be removed features, - <code>Removed</code> for now-removed
features, - <code>Fixed</code> for any bug fixes, and -
<code>Security</code> in case of vulnerabilities.</p>
<p>For example, our initial release was version 0.1.0, and we have now
changed the functionality. Our CHANGELOG should look something like:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu"># Changelog</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>All notable changes to this project will be documented in this file.</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>The format is based on <span class="co">[</span><span class="ot">Keep a Changelog</span><span class="co">](https://keepachangelog.com/en/1.0.0/)</span>,</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>and this project adheres to <span class="co">[</span><span class="ot">Semantic Versioning</span><span class="co">](https://semver.org/spec/v2.0.0.html)</span>.</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">## Unreleased</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="fu">### Changed</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="ss">- </span>rescale function now scales constant arrays to 1</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="fu">## [0.1.0] - 2022-08-09</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="fu">### Added</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="ss">- </span>Created rescale() function and released example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE</span></code></pre>
</div>
<p>If at this point you want to increment the version to 0.1.1 to
indicate this small fix to the behavior, you would add a new section for
this version:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">## Unreleased</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">## [0.1.1] - 2022-08-10</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="fu">### Changed</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="ss">- </span>rescale function now scales constant arrays to 1</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="fu">## [0.1.0] - 2022-08-09</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="fu">### Added</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="ss">- </span>Created rescale() function and released example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE</span></code></pre>
</div>
<p>Note that the version numbers are shown as links in these examples,
although the links are not included in the file snippets. You should add
definitions of these links at the bottom of the file, using (for
example) GitHub’s ability to compare between tagged versions:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ot">[0.1.1]: </span>https://github.com/<span class="dt">&lt;</span><span class="kw">username</span><span class="dt">&gt;</span>/example-example-package-YOUR-USERNAME-HERE-YOUR-USERNAME-HERE/compare/v0.1.1...v0.1.0</span></code></pre>
</div>
<div id="other-locations" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-locations" class="callout-inner">
<h3 class="callout-title">Other locations</h3>
<div class="callout-content">
<p>Once we have things inside the <code>docs/</code> folder,
<code>docs/changelog.md</code> is also a good place, and keeps your
outer directory a bit cleaner. But we’ll put it here for now so that we
don’t interfere with that lesson.</p>
</div>
</div>
</div>
<div id="automating-changelog-management" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="automating-changelog-management" class="callout-inner">
<h3 class="callout-title">Automating Changelog Management</h3>
<div class="callout-content">
<p>There are several tools which are intended to help manage a
changelog. Broadly speaking, they use specifically formatted commit
messages to generate the changelog. They usually impose a specific way
of working, require consistency and discipline when writing the
messages, often need manual tweaking of the changelog after
generation.</p>
<div class="section level3">
<h3 id="commitizen-conventional-commits-and-semver">
<code>commitizen</code>, “conventional commits” and SemVer<a class="anchor" aria-label="anchor" href="#commitizen-conventional-commits-and-semver"></a>
</h3>
<p><a href="https://commitizen-tools.github.io/commitizen/" class="external-link"><code>commitizen</code></a>
is a release management tool which helps developers to write <a href="https://www.conventionalcommits.org/" class="external-link">conventional commits</a> and
can generate a grouped and sorted changelog
(<code>commitizen changelog</code>). Generating a new release, tagging
it with an updated version number, and generating a changelog can be
automated using <a href="https://commitizen-tools.github.io/commitizen/tutorials/github_actions/" class="external-link">GitHub
Actions</a>.</p>
<p>This requires: - squashing each change into a single commit, -
consistency and discipline when writing commit messages.</p>
</div>
<div class="section level3">
<h3 id="github">GitHub<a class="anchor" aria-label="anchor" href="#github"></a>
</h3>
<p>GitHub can “generate release notes” with each release of code, which
is a list of the titles of the <strong>pull requests</strong> included
in the release. People can view the release notes on GitHub.</p>
<p>These release notes: - only appear on GitHub, - aren’t automatically
grouped and sorted, - only include changes which were part of a pull
request title.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="additional-files-for-git">Additional files for Git<a class="anchor" aria-label="anchor" href="#additional-files-for-git"></a>
</h2>
<hr class="half-width">
<p>At this point, your package has most of the supplemental files that
it needs to be shared with the world. However, there are some additional
files you can add to help with your Git workflow.</p>
<div class="section level3">
<h3 id="gitignore">.gitignore<a class="anchor" aria-label="anchor" href="#gitignore"></a>
</h3>
<p>After adding and committing the files above, you might have noticed
that <code>git status</code> points out a few files/directories that you
do not want it to track:</p>
<pre><code>On branch main
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	__pycache__/
	src/example_package_YOUR_USERNAME_HERE/__pycache__/
	tests/__pycache__/

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
<p>{: .output}</p>
<p>Fortunately, you can instruct Git to ignore these files, and others
that you will never want to track, using a <code>.gitignore</code> file,
which goes at the main directory level of your package.</p>
<p>This file tells Git to ignore either specific files or directories,
or those that match a certain pattern via the wildcard character (e.g.,
<code>*.so</code>). The <a href="https://git-scm.com" class="external-link">Git reference
manual</a> has very <a href="https://git-scm.com/docs/gitignore" class="external-link">detailed documentation</a> of
possible <code>.gitignore</code> file syntax, but for convenience GitHub
maintains a <a href="https://github.com/github/gitignore" class="external-link">collection of
<code>.gitignore</code> files</a> for various languages and tools.</p>
<p>For your project, you should copy or download the <a href="https://github.com/github/gitignore/blob/main/Python.gitignore" class="external-link">Python-specific
<code>.gitignore</code> file</a> file into a local
<code>.gitignore</code>:</p>
<pre><code># Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other infos into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py,cover
.hypothesis/
.pytest_cache/
cover/

# Translations
*.mo
*.pot

# Django stuff:
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal

# Flask stuff:
instance/
.webassets-cache

# Scrapy stuff:
.scrapy

# Sphinx documentation
docs/_build/

# PyBuilder
.pybuilder/
target/

# Jupyter Notebook
.ipynb_checkpoints

# IPython
profile_default/
ipython_config.py

# pyenv
#   For a library or package, you might want to ignore these files since the code is
#   intended to run in multiple environments; otherwise, check them in:
# .python-version

# pipenv
#   According to pypa/pipenv#598, it is recommended to include Pipfile.lock in version control.
#   However, in case of collaboration, if having platform-specific dependencies or dependencies
#   having no cross-platform support, pipenv may install dependencies that don't work, or not
#   install all needed dependencies.
#Pipfile.lock

# poetry
#   Similar to Pipfile.lock, it is generally recommended to include poetry.lock in version control.
#   This is especially recommended for binary packages to ensure reproducibility, and is more
#   commonly ignored for libraries.
#   https://python-poetry.org/docs/basic-usage/#commit-your-poetrylock-file-to-version-control
#poetry.lock

# pdm
#   Similar to Pipfile.lock, it is generally recommended to include pdm.lock in version control.
#pdm.lock
#   pdm stores project-wide configurations in .pdm.toml, but it is recommended to not include it
#   in version control.
#   https://pdm.fming.dev/#use-with-ide
.pdm.toml

# PEP 582; used by e.g. github.com/David-OConnor/pyflow and github.com/pdm-project/pdm
__pypackages__/

# Celery stuff
celerybeat-schedule
celerybeat.pid

# SageMath parsed files
*.sage.py

# Environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# Spyder project settings
.spyderproject
.spyproject

# Rope project settings
.ropeproject

# mkdocs documentation
/site

# mypy
.mypy_cache/
.dmypy.json
dmypy.json

# Pyre type checker
.pyre/

# pytype static type analyzer
.pytype/

# Cython debug symbols
cython_debug/

# PyCharm
#  JetBrains specific template is maintained in a separate JetBrains.gitignore that can
#  be found at https://github.com/github/gitignore/blob/main/Global/JetBrains.gitignore
#  and can be added to the global gitignore or merged into this file.  For a more nuclear
#  option (not recommended) you can uncomment the following to ignore the entire idea folder.
#.idea/</code></pre>
<p>You can see that a few patterns are commented out, and can be
uncommented if they apply to your project and/or workflow. You can also
clean up sections of the file that do not apply to your situation, but
there’s no real need to do so since you likely won’t look at this file
again.</p>
<p>Once you have added this to the top level of your project (alongside
the <code>.git</code> directory), and told Git to track it
(<code>git add .gitignore</code>,
<code>git commit -m 'adds gitignore file'</code>), Git will
automatically begin following your rules:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<pre><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>At this point, if you have added all of these files, your package’s
file structure should look something like this:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">├──</span> .git/</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="ex">├──</span> .venv/</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="ex">├──</span> .gitignore</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="ex">├──</span> docs/</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="ex">├──</span> pyproject.toml</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="ex">├──</span> src/</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="ex">│</span>   └── example_example_package_YOUR_USERNAME_HERE_YOUR_USERNAME_HERE/</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="ex">│</span>   │   ├── __init__.py</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="ex">│</span>   │   └── rescale.py</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="ex">└──</span> tests/</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    <span class="ex">└──</span> test_rescale.py</span></code></pre>
</div>
<p>The <code>.git</code> and <code>.venv</code> directories would have
been automatically generated by Git and Virtualenv respectively. You may
also see additional directories like <code>__pycache__</code> and
<code>.pytest_cache</code>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Packages should include a README, LICENSE, and CHANGELOG.</li>
<li>Choose an existing software license</li>
<li>You can also include <code>.gitignore</code> to avoid from
committing non-source files.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-metadata"><p>Content from <a href="metadata.html">Metadata</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/metadata.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What metadata is important to add to your package?</li>
<li>How do I add common functionality, like executable scripts?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about the project table.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In a previous lesson, we left the metadata in our
<code>pyproject.toml</code> quite minimal, just: - a name and - a
version.</p>
<p>There are quite a few other fields that can really help your package
on PyPI, however. We’ll look at them, split into categories: -
Informational: author, description, URL, etc. - Functional:
requirements, tool configurations etc.</p>
<p>There’s also a special <code>dynamic</code> field that lets you list
values that are going to come from some other source.</p>
<section><h2 class="section-heading" id="informational-metadata">Informational metadata<a class="anchor" aria-label="anchor" href="#informational-metadata"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="name">Name<a class="anchor" aria-label="anchor" href="#name"></a>
</h3>
<p>Required. <code>.</code>, <code>-</code>, and <code>_</code> are all
equivalent characters, and may be normalized to <code>_</code>. Case is
unimportant. This is the only field that must exist statically in this
table.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">"some_project"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="version">Version<a class="anchor" aria-label="anchor" href="#version"></a>
</h3>
<p>Required. Many backends provide ways to read this from a file or from
a version control system, so in those cases you would add
<code>"version"</code> to the <code>dynamic</code> field and leave it
off here.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"1.2.3"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"0.2.1b1"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h3>
<p>A string with a short description of your project.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dt">description</span> <span class="op">=</span> <span class="st">"This is a very short summary of a very cool project."</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="readme">Readme<a class="anchor" aria-label="anchor" href="#readme"></a>
</h3>
<p>The name of the readme. Most of the time this is
<code>README.md</code> or <code>README.rst</code>, though there is a
more complex mechanism if a user really desires to embed the readme into
your <code>pyproject.toml</code> file (you don’t).</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dt">readme</span> <span class="op">=</span> <span class="st">"README.md"</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="dt">readme</span> <span class="op">=</span> <span class="st">"README.rst"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="authors-and-maintainers">Authors and maintainers<a class="anchor" aria-label="anchor" href="#authors-and-maintainers"></a>
</h3>
<p>This is a list of authors (or maintainers) as (usually inline)
tables. A TOML table is very much like a Python dict.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="dt">authors</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="op">{</span><span class="dt">name</span><span class="op">=</span><span class="st">"Me Myself"</span><span class="op">, </span><span class="dt">email</span><span class="op">=</span><span class="st">"email@mail.com"</span><span class="op">},</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="op">{</span><span class="dt">name</span><span class="op">=</span><span class="st">"You Yourself"</span><span class="op">, </span><span class="dt">email</span><span class="op">=</span><span class="st">"email2@mail.com"</span><span class="op">},</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="dt">maintainers</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="op">{</span><span class="dt">name</span><span class="op">=</span><span class="st">"It Itself"</span><span class="op">, </span><span class="dt">email</span><span class="op">=</span><span class="st">"email3@mail.com"</span><span class="op">},</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>Note that TOML supports two ways to write tables and two ways to
write arrays, so you might see this in a different form, but it should
be recognizable.</p>
</div>
<div class="section level3">
<h3 id="keywords">Keywords<a class="anchor" aria-label="anchor" href="#keywords"></a>
</h3>
<p>A list of keywords for the project. This is mostly used to improve
searchability.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="dt">keywords</span> <span class="op">=</span> <span class="op">[</span><span class="st">"example"</span><span class="op">,</span> <span class="st">"tutorial"</span><span class="op">]</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="urls">URLs<a class="anchor" aria-label="anchor" href="#urls"></a>
</h3>
<p>A set of links to help users find various things for your code; some
common ones are <code>Homepage</code>, <code>Source Code</code>,
<code>Documentation</code>, <code>Bug Tracker</code>,
<code>Changelog</code>, <code>Discussions</code>, and <code>Chat</code>.
It’s a free-form name, though many common names get recognized and have
nice icons on PyPI.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Inline form</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="dt">urls."Source Code"</span> <span class="op">=</span> <span class="st">"https://github.com/&lt;your github username&gt;/example-package-YOUR-USERNAME-HERE"</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># Sectional form</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="kw">[project.urls]</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="dt">"Source Code"</span> <span class="op">=</span> <span class="st">"https://github.com/&lt;your github username&gt;/example-package-YOUR-USERNAME-HERE"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="classifiers">Classifiers<a class="anchor" aria-label="anchor" href="#classifiers"></a>
</h3>
<p>This is a collection of <a href="https://peps.python.org/pep-0301/#distutils-trove-classification" class="external-link">“classifiers”</a>.
You select the classifiers that match your projects from <a href="https://pypi.org/classifiers/" class="external-link uri">https://pypi.org/classifiers/</a>. Usually, this includes a
“Development Status” to tell users how stable you think your project is,
and a few things like “Intended Audience” and “Topic” to help with
search engines. There are some important ones though: the “License” (s)
is used to indicate your license. You also can give an idea of supported
Python versions, Python implementations, and “Operating System”s as
well. If you have statically typed Python code, you can tell users about
that, too.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="dt">classifiers</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="st">"Development Status :: 5 - Production/Stable"</span><span class="op">,</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="st">"Intended Audience :: Developers"</span><span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="st">"Intended Audience :: Science/Research"</span><span class="op">,</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="st">"License :: OSI Approved :: BSD License"</span><span class="op">,</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="st">"Operating System :: OS Independent"</span><span class="op">,</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="st">"Programming Language :: Python"</span><span class="op">,</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3"</span><span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3 :: Only"</span><span class="op">,</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3.8"</span><span class="op">,</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3.9"</span><span class="op">,</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3.10"</span><span class="op">,</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>  <span class="st">"Programming Language :: Python :: 3.11"</span><span class="op">,</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="st">"Topic :: Scientific/Engineering"</span><span class="op">,</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  <span class="st">"Topic :: Scientific/Engineering :: Information Analysis"</span><span class="op">,</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  <span class="st">"Topic :: Scientific/Engineering :: Mathematics"</span><span class="op">,</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>  <span class="st">"Topic :: Scientific/Engineering :: Physics"</span><span class="op">,</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>  <span class="st">"Typing :: Typed"</span><span class="op">,</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>  <span class="st">"Private :: Do Not Upload"</span><span class="op">,</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<div id="prevent-inadvertent-publishing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="prevent-inadvertent-publishing" class="callout-inner">
<h3 class="callout-title">Prevent Inadvertent Publishing</h3>
<div class="callout-content">
<p>By adding the “Private :: Do Not Upload” classifier here, we ensure
that the package will be <a href="https://pypi.org/classifiers/#:~:text=To%20prevent%20a%20package%20from,beginning%20with%20%22Private%20%3A%3A%22." class="external-link">rejected
when we try to upload it to PyPI</a>. If you want to upload to PyPI, you
will need to remove that classifier.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h3>
<p>There are three ways to include your license: 1. The preferred way to
include a standard license is to include a classifier starting with
“License ::”,
<code>toml    [project]    classifiers = [      "License :: OSI Approved :: BSD License",    ]</code>
2. The other way to include a standard license is to put its name in the
<code>license</code> field:
<code>toml    [project]    license = {text = "MIT License"}</code> 3.
You may also put the license in a file named <code>LICENSE</code> or
<code>LICENSE.txt</code> and link it in the <code>license</code> field:
<code>toml    [project]    license = {file = "LICENSE"}</code> If you do
this, after the <a href="publishing.html"><code>build</code> step</a>,
verify the contents of your SDist and Wheel(s) manually to make sure the
license file is included, because some build backends may not support
including the license using this field.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-tvf</span> dist/example_package_YOUR_USERNAME_HERE-0.1.1.tar.gz</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">unzip</span> <span class="at">-l</span> dist/example_package_YOUR_USERNAME_HERE-0.1.1-py2.py3-none-any.whl</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="functional-metadata">Functional metadata<a class="anchor" aria-label="anchor" href="#functional-metadata"></a>
</h2>
<hr class="half-width">
<p>The remaining fields actually change the usage of the package.</p>
<div class="section level3">
<h3 id="requires-python">Requires-Python<a class="anchor" aria-label="anchor" href="#requires-python"></a>
</h3>
<p>This is an important and sometimes misunderstood field. It looks like
this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="dt">requires-python</span> <span class="op">=</span> <span class="st">"&gt;=3.8"</span></span></code></pre>
</div>
<p>Pip will check if the Python version of the environment where the
package being installed passes this expression. If it doesn’t, pip will
start checking older versions of the package until it finds one that
passes. This is how <code>pip install numpy</code> still works on Python
3.7, even though NumPy has already dropped support for it.</p>
<p>You need to make sure you always have this line and that it stays
accurate, since you can’t edit metadata after releasing - you can only
yank or delete release(s) and try again.</p>
<div id="upper-caps" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="upper-caps" class="callout-inner">
<h3 class="callout-title">Upper caps</h3>
<div class="callout-content">
<p>Upper caps (like <code>"&gt;=3.8,&lt;4</code> or
<code>"~=3.8"</code>) are generally discouraged in the Python ecosystem,
but they are broken (even more than usual) when used with
<code>requires-python</code> field. This field was added to help users
drop old Python versions, and the idea it would be used to restrict
newer versions was not considered. The above field is not the right one
to set an upper cap! Never upper cap this field and instead use
classifiers to tell users what versions of Python your code was tested
with.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>Your package likely will need other packages to run. You can add
dependencies on other packages like this:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="dt">...</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="st">"numpy"</span><span class="op">,</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>Sometimes you have dependencies that are only needed some of the
time. These can be specified as optional dependencies. Unlike normal
dependencies, these are specified in a table, with the key being the
option you pass to pip to install it. For example:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">[project.optional-dependenices]</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="dt">test</span> <span class="op">=</span> <span class="op">[</span><span class="st">"pytest&gt;=6"</span><span class="op">]</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="dt">check</span> <span class="op">=</span> <span class="op">[</span><span class="st">"flake8"</span><span class="op">]</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="dt">plot</span> <span class="op">=</span> <span class="op">[</span><span class="st">"matplotlib"</span><span class="op">]</span></span></code></pre>
</div>
<p>Now you can run:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">--editable</span> <span class="st">'.[test,check]'</span></span></code></pre>
</div>
<p>or – once it’s published,</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="st">'example-package-YOUR-USERNAME-HERE[test,check]'</span></span></code></pre>
</div>
<p>– and pip will install both the required and optional dependencies
<code>pytest</code> and <code>flake8</code>, but not
<code>matplotlib</code>.</p>
<div class="section level4">
<h4 id="setting-minimum-maximum-and-specific-versions-of-dependencies">Setting minimum, maximum and specific versions of dependencies<a class="anchor" aria-label="anchor" href="#setting-minimum-maximum-and-specific-versions-of-dependencies"></a>
</h4>
<p><em>Whether</em> you set versions on dependencies depends on what
sort of package you are working on:</p>
<ul>
<li>
<strong>Library</strong>: something that can be imported. Support
the widest range you are able to test. If you have very few users,
requiring recent versions of dependencies is probably fine. If you
expect a large number of users, you should support (and test!) a few
past releases of dependencies.</li>
<li>
<strong>App (CLI/GUI/TUI)</strong>: Something that is installable
but not importable. Wide range preferred, but not as important (assuming
users use pipx and don’t add it to “dev” environments or things like
that).</li>
<li>
<strong>Application (deployment)</strong>: Something like a website
or an analysis. Not installable. Versions should be fully locked.</li>
</ul>
<p>You can set ranges on your dependencies by specifying the ranges in
the <code>pyproject.toml</code> file:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="st">"tqdm"</span><span class="op">,</span>                <span class="co"># no specified range</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="st">"numpy&gt;=1.18"</span><span class="op">,</span>         <span class="co"># lower cap</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="st">"matplotlib&lt;4.0"</span><span class="op">,</span>      <span class="co"># upper cap</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="st">"pandas&gt;1.4.2,&lt;=3.0"</span><span class="op">,</span>  <span class="co"># lower and upper caps</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="st">"seaborn==0.13.2"</span><span class="op">,</span>     <span class="co"># specific version</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>If you have a range of versions supported, you should ideally run
your tests at least once with the minimum versions of your dependencies.
You can do this using: - a <code>constraints.txt</code> file, which
specifies pins on the minimum versions of all your dependencies, and
then use
<code>pip install --constraint constraints.txt --editable .</code>
before running your tests . - a tool like <code>uv</code> which supports
installing with the lowest possible dependencies like this:
<code>uv pip install --resolution=lowest .</code> before running your
tests</p>
<p>Adding an “upper cap” like <code>"numpy&gt;=1.18,&lt;2.0"</code> is
only recommended if you are fairly sure the next version will break your
usage of the library. For more information, see this article on <a href="https://iscinumpy.dev/post/bound-version-constraints/" class="external-link">bound
version constraints</a>.</p>
<p>There are several ways to lock your dependencies completely: -
specify the versions in the <code>pyproject.toml</code> file, or - allow
ranges in the <code>pyproject.toml</code> file and - specify the
versions for your development environment manually using
<code>pip-tools</code>, or - using a locking package manager like PDM or
Poetry. (Just add the lockfiles generated by the tools to your
repository, and they should be used automatically. There is usually an
update command that will update the local environment and the lock
file.)</p>
<div id="pinning-dependencies-with-pip-tools" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pinning-dependencies-with-pip-tools" class="callout-inner">
<h3 class="callout-title">Pinning Dependencies with
<code>pip-tools</code>
</h3>
<div class="callout-content">
<p>Set up a <code>requirements.in</code> file with your unpinned
dependencies. For example:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">TXT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode txt" tabindex="0"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a># requirements.in</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>packaging</span></code></pre>
</div>
<p>Now, run pip-compile from pip-tools on your requirements.in to make a
requirements.txt:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">pipx</span> run <span class="at">--spec</span> pip-tools pip-compile requirements.in <span class="at">--generate-hashes</span></span></code></pre>
</div>
<p>This will produce a <code>requirements.txt</code> with fully locked
dependencies, including hashes. You can always regenerate it when you
want updates.</p>
</div>
</div>
</div>
<div id="project.dependencies-vs.-build-system.requires" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="project.dependencies-vs.-build-system.requires" class="callout-inner">
<h3 class="callout-title">project.dependencies vs. build-system.requires</h3>
<div class="callout-content">
<p>What is the difference between <code>project.dependencies</code>
vs. <code>build-system.requires</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Answer </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p><code>build-system.requires</code> describes what your project needs
to “build”, that is, produce an SDist or wheel. Installing a built wheel
will <em>not</em> install anything from
<code>build-system.requires</code>, in fact, the
<code>pyproject.toml</code> is not even present in the wheel!
<code>project.dependencies</code>, on the other hand, is added to the
wheel metadata, and pip will install anything in that field if not
already present when installing your wheel.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="entry-points">Entry Points<a class="anchor" aria-label="anchor" href="#entry-points"></a>
</h3>
<p>A Python package can have entry points. There are three kinds:
command-line entry points (<code>scripts</code>), graphical entry points
(<code>gui-scripts</code>), and general entry points
(<code>entry-points</code>). As an example, let’s say you have a
<code>main()</code> function inside <code>__main__.py</code> that you
want to run to create a command <code>project-cli</code>. You’d
write:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">[project.scripts]</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="dt">project-cli</span> <span class="op">=</span> <span class="st">"project.__main__:main"</span></span></code></pre>
</div>
<p>The command line name is the table key, and the form of the entry
point is <code>package.module:function</code>. Now, when you install
your package, you’ll be able to type <code>project-cli</code> on the
command line and it will run your Python function.</p>
</div>
</section><section><h2 class="section-heading" id="dynamic">Dynamic<a class="anchor" aria-label="anchor" href="#dynamic"></a>
</h2>
<hr class="half-width">
<p>Fields can be specified dynamically by your build backend. You
specify fields to populate dynamically using the <code>dynamic</code>
field. For example, if you want <code>hatchling</code> to read
<code>__version__.py</code> from
<code>src/package/__init__.py</code>:</p>
<pre><code>[project]
name = "example-package-YOUR-USERNAME-HERE"
dynamic = ["version"]

[tool.hatch]
version.path = "src/example_package_YOUR_USERNAME_HERE/__init__.py"</code></pre>
</section><section><h2 class="section-heading" id="all-together">All together<a class="anchor" aria-label="anchor" href="#all-together"></a>
</h2>
<hr class="half-width">
<p>Now let’s take our previous example and expand it with more
information. Here’s an example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">[build-system]</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="dt">requires</span> <span class="op">=</span> <span class="op">[</span><span class="st">"hatchling"</span><span class="op">]</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="dt">build-backend</span> <span class="op">=</span> <span class="st">"hatchling.build"</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">"example-package-YOUR-USERNAME-HERE"</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"0.1.1"</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  <span class="st">"numpy"</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="dt">authors</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>  <span class="op">{ </span><span class="dt">name</span><span class="op">=</span><span class="st">"Example Author"</span><span class="op">, </span><span class="dt">email</span><span class="op">=</span><span class="st">"author@example.com"</span><span class="op"> },</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="dt">description</span> <span class="op">=</span> <span class="st">"A small example package"</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="dt">readme</span> <span class="op">=</span> <span class="st">"README.md"</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="dt">requires-python</span> <span class="op">=</span> <span class="st">"&gt;=3.8"</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="dt">classifiers</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>    <span class="st">"Programming Language :: Python :: 3"</span><span class="op">,</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>    <span class="st">"License :: OSI Approved :: MIT License"</span><span class="op">,</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>    <span class="st">"Operating System :: OS Independent"</span><span class="op">,</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>    <span class="st">"Private :: Do Not Upload"</span><span class="op">,</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a><span class="kw">[project.optional-dependencies]</span></span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a><span class="dt">test</span> <span class="op">=</span> <span class="op">[</span><span class="st">"pytest"</span><span class="op">]</span></span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a></span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a><span class="kw">[project.urls]</span></span>
<span id="cb20-28"><a href="#cb20-28" tabindex="-1"></a><span class="dt">"Homepage"</span> <span class="op">=</span> <span class="st">"https://&lt;your github username&gt;.github.io/example-package-YOUR-USERNAME-HERE"</span></span>
<span id="cb20-29"><a href="#cb20-29" tabindex="-1"></a><span class="dt">"Source Code"</span> <span class="op">=</span> <span class="st">"https://github.com/&lt;your github username&gt;/example-package-YOUR-USERNAME-HERE"</span></span></code></pre>
</div>
<div id="add-metadata-and-check-it." class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-metadata-and-check-it." class="callout-inner">
<h3 class="callout-title">Add metadata and check it.</h3>
<div class="callout-content">
<p>Take your existing package and add more metadata to it. Install it,
then use <code>pip show -v &lt;package&gt;</code> to see the metadata.
You can also look inside the wheel or SDist to see the metadata.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">-e</span> .</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="ex">pip</span> show <span class="at">-v</span> example-package-YOUR-USERNAME-HERE</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Add informational metadata to tell people about your package.</li>
<li>Add functional metadata to tell people how to install and use your
package.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-versioning"><p>Content from <a href="versioning.html">Versioning</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/versioning.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you choose your versions?</li>
<li>How do you set a version?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Know the different versioning schemes and drawbacks</li>
<li>Know how to set a version in a package</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Versioning is a surprisingly deep topic with some strong opinions
floating around. We will look at a couple of popular versioning schemes.
We will also discuss how you should use the versions your dependencies
provide.</p>
<p>Then we will cover some best practices in setting your own version,
along with a few tips for a good changelog. You’ll learn the simplest
way, along with some advanced technique to single-source your version,
including using your VCS’s tags as versions. This makes mistakes during
releases harder and to allow every single commit to come with a unique
version.</p>
<section><h2 class="section-heading" id="versioning-schemes">Versioning schemes<a class="anchor" aria-label="anchor" href="#versioning-schemes"></a>
</h2>
<hr class="half-width">
<p>There are three commonly used versioning schemes that you will
usually select from. Most packages follow one of these with some
variations. A <em>few</em> packages have custom schemes (LaTeX’s pi
based scheme comes to mind!), but this covers almost all software.</p>
<div class="section level3">
<h3 id="semver-semantic-versioning">SemVer: Semantic Versioning<a class="anchor" aria-label="anchor" href="#semver-semantic-versioning"></a>
</h3>
<p>SemVer lays out a set of rules, summarized here, based on a version
of the form <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>.
These are:</p>
<ul>
<li>If your API changes in a breaking way, the <code>major</code> number
must be incremented.</li>
<li>If you add API but don’t break existing API, you can increment the
<code>minor</code> version.</li>
<li>If you only fix bugs, you can increment the <code>patch</code>
version.</li>
</ul>
<p>And obviously set the smaller version values to zero when you
increment a larger one.</p>
<p>This seems simple, but what is a breaking change? The unintuitive
answer is that it depends on how many users you have. Every change could
be a breaking change to someone if you have enough users (at least in a
language like Python where everything can be accessed if you try hard
enough). The closer you try to follow “true” SemVer, the more major
releases you will have, until you’ve lost the usefulness of SemVer and
every release is basically a major release. An example of a package that
has a lot of users and tries to follow SemVer pretty closely is
Setuptools, which is on version 68 as of the time of writing. And
minor/patch release still break some users.</p>
<div id="avoiding-breakage" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="avoiding-breakage" class="callout-inner">
<h3 class="callout-title">Avoiding breakage</h3>
<div class="callout-content">
<p>You can’t be sure that a minor patch release will not break you. No
library can follow SemVer close enough to be “true” SemVer unless they
only release major versions. “They didn’t follow SemVer closely enough”
is not a good argument for any package causing breakage.</p>
</div>
</div>
</div>
<p>A more realistic form of SemVer, and a better way to think about it,
is as an abbreviated changelog and author intent. In this form:</p>
<ul>
<li>Bumping a <code>patch</code> version means there’s nothing to see,
just fixing things, you are probably fine.</li>
<li>Bumping a <code>minor</code> version means that there might be
interesting things to see, but nothing you have to see.</li>
<li>Bumping a <code>major</code> version means you really should look,
changes might even be needed for users.</li>
</ul>
<p>If a release breaks your code, you are more likely to be able to get
a followup patch release fixing your use case if it’s a patch or minor
version. If you view SemVer this way, a lot less grief will occur from
broken expectations. Also, changelogs are really important, so having a
way to notify people when there’s things to look at is really
useful.</p>
<p>A final variation that is very common in the Python community is a
deprecation cycle addition. This says that a feature that is deprecated
in a minor version can be removed in a minor version after a certain
time or number of minor versions. Python itself uses this (due partially
to an extreme aversion to ever releasing another major version), along
with NumPy and others. Python’s deprecation cycle is two releases (3.12
deprecations can be removed in 3.14), and NumPy’s is three.</p>
<blockquote>
<h4 id="getting-deprecation-warnings">Getting deprecation warnings</h4>
<p>In Python, the deprecation warnings are
<code>PendingDeprecationWarning</code>, <code>DeprecationWarning</code>,
and <code>FutureWarning</code>, in that order. The first two are often
not shown by default, so always run your test suite with full warnings
as errors enabled, so that you are able to catch them. And if it’s your
library, doing at least one final release with
<code>FutureWarning</code> is a good idea as it’s not hidden by
default.</p>
</blockquote>
<p>Some suggestions for how you depend on packages will be given later,
but let’s look at the other two common mechanisms first.</p>
<blockquote>
<h4 id="python-only">Python only</h4>
<p>Discussions of SemVer need to be centered on Python and the Python
community. Other Languages have different communities and different
tools. For example, JavaScript’s NodeJS supports each dependency getting
their own copy of their dependency. This makes the ecosystem’s
expectations of pinning totally different.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="zerover">ZeroVer<a class="anchor" aria-label="anchor" href="#zerover"></a>
</h3>
<p>Sometimes packages start with a <code>0</code>; if they do that, they
are using a modified version of SemVer, sometimes called ZeroVer. In
this, the first non-zero digit is a major version, and the second
non-zero value is somewhere between a minor and patch. There are several
reasons for this version scheme; sometimes it is to indicate the package
is still under heavy development. Though, in practice, selecting a point
to release “1.0” can be quite difficult; a user’s expectation (this is
stable now) and the developers expectation (some huge new feature added
/ rewrite, etc) are completely at odds. This has led some very popular
projects to still be using ZeroVer.</p>
</div>
<div class="section level3">
<h3 id="calver-calendar-based-versioning">CalVer: Calendar based versioning<a class="anchor" aria-label="anchor" href="#calver-calendar-based-versioning"></a>
</h3>
<p>Another scheme growing in popularity in the Python community is the
CalVer scheme. This sets the version number based on release date. There
are several variations; some projects literally place the date (two or
four digit year followed by month then day), and some blend a little bit
of SemVer in by making the second or third digit SemVer-like. An example
of a popular (non-Python) project using CalVer is Ubuntu - the version
(like 22.04) is the release year and month. Pip uses a blended CalVer;
Pip releases three major versions per year like <code>23.1.0</code>; the
final release of the year is <code>23.3.patch</code>. Those these are
technically major versions, they tend to try to do larger changes
between years.</p>
<p>CalVer does two things well; it communicates how old a release is
without having to check release notes, and it allows deprecation cycles
(remember we said those were important in Python!) to be expressed in
terms of time - if you want a one year deprecation cycle, you know
exactly what release the item will be removed/changed in. It also helps
clearly communicate the problem with SemVer - you don’t know when
something will make a breaking release for <em>you</em>, so don’t
predict / depend on something breaking. You might be tempted to set
<code>package&lt;2</code>, but you should never be tempted to set
<code>package&lt;24</code> - it’s not SemVer! (See the section on
locking!)</p>
<p>Due to this, several core Python packaging projects (like pip,
packaging, and virtualenv) use CalVer. CalVer is especially useful for
something that talks to external services (like pip). Another popular
library using it is <code>attrs</code>.</p>
</div>
</section><section><h2 class="section-heading" id="setting-a-version-on-your-package">Setting a version on your package<a class="anchor" aria-label="anchor" href="#setting-a-version-on-your-package"></a>
</h2>
<hr class="half-width">
<p>When you start a project, select one of the major versioning
schemes.</p>
<div class="section level3">
<h3 id="two-locations">Two locations<a class="anchor" aria-label="anchor" href="#two-locations"></a>
</h3>
<p>The “standard” way to set a version is by setting it manually in your
<code>pyproject.toml</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">"1.2.3"</span></span></code></pre>
</div>
<p>And placing it in your source code accessible as
<code>__version__</code> on your package. You don’t have to do that,
since a user can use
<code>importlib.metadata.version("example-package-YOUR-USERNAME-HERE")</code>
to get the version, but this is a very common practice and is useful if
there is an issue and you need a hard copy of the version in the source
for an improperly packaged file.</p>
<p>If you use this method, you should probably set up some automatic way
to bump the version in both places, or some sort of check/test that
verifies they are in sync.</p>
</div>
<div class="section level3">
<h3 id="single-location-hatchling">Single location (hatchling)<a class="anchor" aria-label="anchor" href="#single-location-hatchling"></a>
</h3>
<p>Most build backends provide methods to get the version from your
source code. In hatchling, it looks like this:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="dt">dynamic</span> <span class="op">=</span> <span class="op">[</span><span class="st">"version"</span><span class="op">]</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="kw">[tool.hatch]</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="dt">version.path</span> <span class="op">=</span> <span class="st">"src/example_package_YOUR_USERNAME_HERE/__init__.py"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="vcs-versioning-hatchling">VCS versioning (hatchling)<a class="anchor" aria-label="anchor" href="#vcs-versioning-hatchling"></a>
</h3>
<p>Technically, there’s another source for the version: git tags. A tag
is a marker for a particular commit in a git history.</p>
<p>You can create a git tag on your last commit using
<code>git tag &lt;version&gt;</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">git</span> tag v0.1.0</span></code></pre>
</div>
<div id="git-tags-and-branches" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="git-tags-and-branches" class="callout-inner">
<h3 class="callout-title">
<code>git</code> Tags and Branches</h3>
<div class="callout-content">
<p>A tag is like a branch but it doesn’t move when you make a new
commit.</p>
<p>You can check out a particular tagged version using
<code>git checkout</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">git</span> checkout v0.2.0</span></code></pre>
</div>
<p>but you will need to checkout a branch before you commit again,
e.g.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">git</span> checkout main</span></code></pre>
</div>
</div>
</div>
</div>
<p>Some backends provide ways to use these as the single version source.
This also means every commit gets a unique version, since “commits past
tag” is usually added to the version number.</p>
<p>In hatchling, it looks like this:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">[build-system]</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="dt">requires</span> <span class="op">=</span> <span class="op">[</span><span class="st">"hatchling"</span><span class="op">,</span> <span class="st">"hatch-vcs"</span><span class="op">]</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">[project]</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="dt">dynamic</span> <span class="op">=</span> <span class="op">[</span><span class="st">"version"</span><span class="op">]</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="kw">[tool.hatch]</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="dt">version.source</span> <span class="op">=</span> <span class="st">"vcs"</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="dt">build.hooks.vcs.version-file</span> <span class="op">=</span> <span class="st">"src/example_package_YOUR_USERNAME_HERE/_version.py"</span></span></code></pre>
</div>
<p>When you run <code>pip install --editable .</code>, or build your
package for distribution, a new file
<code>src/example_package_YOUR_USERNAME_HERE/_version.py</code> will be
created.</p>
<p>You can use the <code>__version__</code> from that file in your
<code>__init__.py</code> file like this:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># src/example_package_YOUR_USERNAME_HERE/__init__.py</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">from</span> ._version <span class="im">import</span> __version__</span></code></pre>
</div>
<p>… allowing users to call</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> example_package_YOUR_USERNAME_HERE</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>example_package_YOUR_USERNAME_HERE.__version__  <span class="co"># 'v0.1.0'</span></span></code></pre>
</div>
<p>Ensure the <code>_version.py</code> file is not stored in the
repository by adding it to the <code>.gitignore</code> file:</p>
<pre><code># Ignore dynamic version file
src/example_package_YOUR_USERNAME_HERE/_version.py</code></pre>
</div>
</section><section><h2 class="section-heading" id="version-number-in-git-archive">Version Number in <code>git archive</code>
<a class="anchor" aria-label="anchor" href="#version-number-in-git-archive"></a>
</h2>
<hr class="half-width">
<p>If you also want git tarballs to contain the version, add the
following to your <code>.gitattributes</code> file:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">TXT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode txt" tabindex="0"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>.git_archival.txt  export-subst</span></code></pre>
</div>
<p>And the following <code>.git_archival.txt</code> file:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">TXT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode txt" tabindex="0"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>node: $Format:%H$</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>node-date: $Format:%cI$</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>describe-name: $Format:%(describe:tags=true,match=*[0-9]*)$</span></code></pre>
</div>
<p>Now <code>git archive</code>’s output (like the tarballs GitHub
provides) will also include the version information (for recent versions
of git)!</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">git</span> archive <span class="at">--output</span><span class="op">=</span>./package_archive.tar <span class="at">--format</span><span class="op">=</span>tar HEAD</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">mkdir</span> extract <span class="kw">&amp;&amp;</span> <span class="fu">tar</span> <span class="at">-xvf</span> package_archive.tar <span class="at">-C</span> extract</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">cat</span> extract/.git_archival.txt</span></code></pre>
</div>
<div id="add-a-versioning-system" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="add-a-versioning-system" class="callout-inner">
<h3 class="callout-title">Add a versioning system</h3>
<div class="callout-content">
<p>Add one of the two single-version systems listed above to your
package.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Packages should have a version attribute</li>
<li>Semantic versioning is an abbreviated changelog, not the solution to
all problems</li>
<li>You can use packaging tools so that the version number needs
updating in one (and only one) place</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-publishing"><p>Content from <a href="publishing.html">Publishing package and citation</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/publishing.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I publish a package?</li>
<li>How do I make my work citable?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about publishing a package on PyPI</li>
<li>Learn about making work citable</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>If you want other people to be able to access your package, you need
to publish it.</p>
<p>In this episode we’ll: - investigate the formats you can use to share
your package: source distribution and wheel, - publish those on the
Python Package Index (PyPI), - add automation to your project to make
publishing easier, - share the package on Zenodo to get a Digital Object
Identifier so that your work is more easily citeable.</p>
<section><h2 class="section-heading" id="formats">Formats<a class="anchor" aria-label="anchor" href="#formats"></a>
</h2>
<hr class="half-width">
<p>One “format” is available as soon as you have pushed your work to a
platform like GitHub: - <strong>repository</strong>: - Contains all of
your repository, including tests, metadata, and its history, - Requires
your build backend (hatchling, in this case) to build. - The source is
distributed in the form of a repository accessible to the user. -
Installation:
<code>pip install git+https://git.example.com/MyProject</code> where
<code>git+</code> tells <code>pip</code> how to interpret the
repository. - You can also specify particular revisions, like: *
<code>pip install git+https://git.example.com/MyProject.git@v1.0</code>
*
<code>pip install git+https://git.example.com/MyProject.git@main</code>
*
<code>pip install git+https://git.example.com/MyProject.git@da39a3ee5e6b4b0d3255bfef95601890afd80709</code>
*
<code>pip install git+https://git.example.com/MyProject.git@refs/pull/123/head</code></p>
<p>If you want to share your work with a wider audience, there are two
major formats used to publish python packages: - <strong>source
distribution</strong> (<code>sdist</code> for short): - Contains most of
your repository, including tests, and - Requires your build backend
(hatchling, in this case) to build. - <strong>wheel</strong>: - The
wheel is “built”, the contents are ready to unpack into standard
locations (usually site-packages), and does not contain configuration
files like <code>pyproject.toml</code>. - Usually you do not include
things like tests in the wheel. - Wheels also can contain binaries for
packages with compiled portions.</p>
</section><section><h2 class="section-heading" id="building-sdists-and-wheels">Building SDists and wheels<a class="anchor" aria-label="anchor" href="#building-sdists-and-wheels"></a>
</h2>
<hr class="half-width">
<p>You can build an SDist and a wheel (from that SDist) with
<code>pipx</code> and the <code>build</code> package:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">pipx</span> run build</span></code></pre>
</div>
<p>The module is named build, so <code>python -m build</code> is how
you’d run it from a task runner like nox or hatch. The executable is
actually named <code>pyproject-build</code>, since installing a
<code>build</code> executable would likely conflict with other things on
your system.</p>
<p>This produces the wheel and sdist in <code>./dist</code>.</p>
<p>You can validate the files generated using</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">pipx</span> run twine check dist/<span class="pp">*</span></span></code></pre>
</div>
<div id="conda" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="conda" class="callout-inner">
<h3 class="callout-title">Conda</h3>
<div class="callout-content">
<p>Building for conda is quite different. If you just have a pure Python
package, you should just use pip to install in conda environments until
you have a conda package that depends on your package and wants to add
it into it’s requirements.</p>
<p>If you do need to build a conda package, you’ll need to either <a href="https://github.com/conda-forge/staged-recipes" class="external-link">propose a new
recipe</a> to conda-forge, or set up the build infrastructure yourself
and publish to an anaconda.org channel.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="manual-publishing">Manual publishing<a class="anchor" aria-label="anchor" href="#manual-publishing"></a>
</h2>
<hr class="half-width">
<div id="do-you-need-to-publish-to-pypi" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="do-you-need-to-publish-to-pypi" class="callout-inner">
<h3 class="callout-title">Do you need to publish to PyPI?</h3>
<div class="callout-content">
<p>Not every package needs to go on PyPI. You can pip install directly
from git, or from a URL to a package hosted somewhere else, or you can
set up your own wheelhouse and point pip at that. Also an “application”
like a website or other code you deploy probably does not need to be on
PyPI.</p>
</div>
</div>
</div>
<p>You can publish files manually with <code>twine</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">pipx</span> run twine upload <span class="at">-r</span> testpypi dist/<span class="pp">*</span></span></code></pre>
</div>
<p>The <code>-r testpypi</code> tells twine to upload to TestPyPI
instead of the real PyPI - remove this if you are not in a tutorial.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>To run this locally, you’ll also need to setup an API token to upload
the package with. Create a token at <a href="https://test.pypi.org/manage/account/" class="external-link">https://test.pypi.org/manage/account/</a>.</p>
</div>
</div>
</div>
<p>However, the best way to publish is from CI. This has several
benefits: you are always in a clean checkout, so you won’t accidentally
include added or changed files, you have a simpler deployment procedure,
and you have more control over who can publish in GitHub.</p>
</section><section><h2 class="section-heading" id="building-in-github-actions">Building in GitHub Actions<a class="anchor" aria-label="anchor" href="#building-in-github-actions"></a>
</h2>
<hr class="half-width">
<p>GitHub Actions can be used for any sort of automation task, not just
building tests. You can use it to make your releases too! Combined with
the version control feature from the previous lesson, making a new
release can be a simple procedure.</p>
<p>Let’s first set up a job that builds the file in a new workflow:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># .github/workflows/publish.yml</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">  </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">  </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">    </span><span class="fu">types</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> published</span></span></code></pre>
</div>
<p>This has two triggers. The first, <code>workflow_dispatch</code>,
allows you to manually trigger the workflow from the GitHub web UI for
testing. The second will trigger whenever you make a GitHub Release,
which will be covered below. You might want to add builds for your main
branch, as well. We will make sure uploads to PyPI only happen on
releases later.</p>
<p>Now, we need to set up the builder job:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">  </span><span class="fu">dist</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">        </span><span class="fu">fetch-depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build SDist &amp; wheel</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pipx run build</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v4</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist/*</span></span></code></pre>
</div>
<p>We’ve seen the setup before. We are calling the job
<code>dist</code>, using an Ubuntu runner, and checking out the code,
including the git history so the version can be computed with
<code>fetch-depth: 0</code> (which can be removed if you are not using
git versioning).</p>
<div id="test-and-upload-action" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="test-and-upload-action" class="callout-inner">
<h3 class="callout-title">Test and upload action</h3>
<div class="callout-content">
<p>There’s a great action for building and inspecting a pure Python
package:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> hynek/build-and-inspect-python-package@v2</span></span></code></pre>
</div>
<p>This action builds, runs various checkers, then uploads the package
to <code>Packages</code>. If you use this, you’ll need to download the
artifact from <code>name: Packages</code>.</p>
</div>
</div>
</div>
<p>The next step builds the wheel and SDist. Pipx is a supported package
manager on all GitHub Actions runners.</p>
<p>The final step uploads an Actions “artifact”. This allows you to
download the produced files from the GitHub Actions UI, and these files
are also available to other jobs. The default name is
<code>artifact</code>, which is as good as any other name for the
moment.</p>
<p>We could have combined the build and publish jobs if we really wanted
to, but they are cleaner when separate, so we have a publish job as
well.</p>
<p>{% raw %}</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">publish</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="at">  </span><span class="fu">needs</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">dist</span><span class="kw">]</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="at">  </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">  </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name == 'release' &amp;&amp; github.event.action == 'published'</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="at">  </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/download-artifact@v4</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">    </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> artifact</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> dist</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> pypa/gh-action-pypi-publish@release/v1</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="at">    </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="at">      </span><span class="fu">repository-url</span><span class="kw">:</span><span class="at"> https://test.pypi.org/legacy/</span></span></code></pre>
</div>
<p>This job requires that the previous job completes successfully with
<code>needs:</code>. It has an <code>if:</code> block as well that
ensures that it only runs when you publish. Note that Actions usually
requires <code>${{ ... }}</code> to evaluate code, like
<code>github.event_name</code>, but blocks that always are evaluated,
like <code>if:</code>, don’t require manually wrapping in this syntax.
{% endraw %}</p>
<p>Then we download the artifact. You need to tell it the
<code>name:</code> to download (otherwise it will download all artifacts
into named folders). We used the default <code>artifact</code> so that’s
needed here. We want to unpack it into <code>./dist</code>, so we set
the <code>path:</code> to that.</p>
<p>Finally, we use the PyPA’s publish action. You will need to go to
PyPI and tell it where you are publishing from so that the publish can
happen via PyPI’s trusted publishers. We are using Test PyPI for this
exercise - remove the <code>with:</code> block to publish to real
PyPI.</p>
</section><section><h2 class="section-heading" id="making-a-release">Making a release<a class="anchor" aria-label="anchor" href="#making-a-release"></a>
</h2>
<hr class="half-width">
<p>A release on GitHub corresponds to two things: a git tag, and a
GitHub Release. If you create the release first, a lightweight tag will
be generated for you. If you tag manually, remember to create the GitHub
release too, so users can see the most recent release in the UI and will
be notified if they are watching your releases.</p>
<p>Click Releases -&gt; Draft a new release. Type in or select a tag;
the recommended format is <code>v1.2.3</code>; that is, a “v” followed
by a version number. Give it a title, like “Version 1.2.3”; keep this
short so that it will be readable on the web UI. Finally, fill in the
description (there’s an autogenerate button that might be helpful).</p>
<p>When you release, this will trigger the GitHub Action workflow we
developed and upload your package to TestPyPI!</p>
</section><section><h2 class="section-heading" id="digital-object-identifier-doi">Digital Object Identifier (DOI)<a class="anchor" aria-label="anchor" href="#digital-object-identifier-doi"></a>
</h2>
<hr class="half-width">
<p>You can add a repository to <a href="https://zenodo.org" class="external-link uri">https://zenodo.org</a> to get a DOI once you publish. Follow
the instructions in the <a href="https://docs.github.com/en/repositories/archiving-a-github-repository/referencing-and-citing-content" class="external-link">GitHub
Documentation</a>.</p>
<p>To test the functionality, you can use the <a href="https://sandbox.zenodo.org/" class="external-link">Zenodo Sandbox</a>.</p>
</section><section><h2 class="section-heading" id="the-citation-cff-file">The CITATION.cff file<a class="anchor" aria-label="anchor" href="#the-citation-cff-file"></a>
</h2>
<hr class="half-width">
<p>From <a href="https://citation-file-format.github.io/" class="external-link">https://citation-file-format.github.io/</a>:
&gt; <code>CITATION.cff</code> files are plain text files with human-
and machine-readable citation information for software (and datasets).
&gt; Code developers can include them in their repositories to let
others know how to correctly cite their software.</p>
<p>This file format is becoming a de-facto standard, and is supported by
GitHub, Zenodo and Zotero.</p>
<p>The CITATION.cff file looks like this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">message</span><span class="kw">:</span><span class="at"> </span><span class="st">"If you use this software, please cite it as below."</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Druskat</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="at">    </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Stephan</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="at">    </span><span class="fu">orcid</span><span class="kw">:</span><span class="at"> https://orcid.org/1234-5678-9101-1121</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My Research Software"</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">2.0.4</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">identifiers</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> doi</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> 10.5281/zenodo.1234</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="fu">date-released</span><span class="kw">:</span><span class="at"> 2021-08-11</span></span></code></pre>
</div>
<p>You can validate your file by running:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">pipx</span> run cffconvert <span class="at">--validate</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>CI can publish Python packages</li>
<li>Tagging and GitHub Releases are used to publish versions</li>
<li>Zenodo and CITATION.cff are useful for citations</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-documentation"><p>Content from <a href="documentation.html">Documentation Overview</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/documentation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I document my project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to set up documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Documentation used to require learning RestructureText (sometimes
referred to as ReST / RST), but today we have great choices for
documentation in markdown, the same format used by GitHub, Wikipedia,
and others. You should select one of the two major documentation
toolchains, <strong>sphinx</strong> or <strong>mkdocs</strong>.</p>
<p>The following episodes cover each of those.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Sphinx or MkDocs are both good for documentation</li>
</ul>
</div>
</div>
</div></section><section id="aio-documentation-sphinx"><p>Content from <a href="documentation-sphinx.html">Documentation with Sphinx</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/documentation-sphinx.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I document my project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to set up documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this lesson, we’ll outline creating a documentation webpage using
Sphinx.</p>
<p>You will: - set up a basic documentation directory, - create a
configuration including the modern MyST plugin to get markdown support,
- start a preview server, - create a table of contents, - add a page, -
include part of your README.md, - choose a theme.</p>
<section><h2 class="section-heading" id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<hr class="half-width">
<p>We’ll start with the built-in template. Start by creating a
<code>docs/</code> directory within your project (i.e. next to
<code>src/</code>).</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Why not Sphinx-Quickstart?
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>You <em>could</em> use sphinx-quickstart to set up a basic template
if you’d like.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">pipx</span> run <span class="at">--spec</span> sphinx sphinx-quickstart <span class="at">--no-makefile</span> <span class="at">--no-batchfile</span> <span class="at">--ext-autodoc</span> <span class="at">--ext-intersphinx</span> <span class="at">--extensions</span> myst_parser <span class="at">--suffix</span> .md docs</span></code></pre>
</div>
<p>But this will put Restructured Text into the <code>index.md</code>
file, and doesn’t really generate that much for you. You can instead add
the <code>docs/conf.py</code> file yourself, which is what we’ll do
here.</p>
</div>
</div>
</div>
</div>
<p>You first file is a configuration file,
<code>docs/conf.py</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># docs/conf.py</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>project <span class="op">=</span> <span class="st">"example"</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>extensions <span class="op">=</span> [<span class="st">"myst_parser"</span>]</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>source_suffix <span class="op">=</span> [<span class="st">".rst"</span>, <span class="st">".md"</span>]</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h2>
<hr class="half-width">
<p>And add (a correct) <code>docs/index.md</code> yourself:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu"># package</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="in">```{toctree}</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="in">:maxdepth: 2</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="in">:hidden:</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">## Indices and tables</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="ss">* </span>{ref}<span class="in">`genindex`</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="ss">* </span>{ref}<span class="in">`modindex`</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="ss">* </span>{ref}<span class="in">`search`</span></span></code></pre>
</div>
<p>As you add new pages, you will list them in the toctree above.</p>
</section><section><h2 class="section-heading" id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<hr class="half-width">
<p>Add the docs dependencies to <code>pyproject.toml</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">[project.optional-dependencies]</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="dt">docs</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="st">"myst_parser &gt;=0.13"</span><span class="op">,</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="st">"sphinx &gt;=4.0"</span><span class="op">,</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="preview-server">Preview Server<a class="anchor" aria-label="anchor" href="#preview-server"></a>
</h2>
<hr class="half-width">
<p>You can install these dependencies using `pip install –editable
“.[docs]”.</p>
<p>To run the Sphinx preview server, you can install
<code>sphinx-autobuild</code>, then run:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">sphinx-autobuild</span> <span class="at">--open-browser</span> <span class="at">-b</span> html <span class="st">"./docs"</span> <span class="st">"_build/html"</span></span></code></pre>
</div>
<p>This will rebuild if you change files, as well.</p>
</section><section><h2 class="section-heading" id="nox-session">Nox session<a class="anchor" aria-label="anchor" href="#nox-session"></a>
</h2>
<hr class="half-width">
<p>You can set up a task runner like nox to run this for you:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="at">@nox.session</span>(reuse_venv<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="kw">def</span> docs(session: nox.Session) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">    Build the docs. Use "--non-interactive" to avoid serving.</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    serve <span class="op">=</span> session.interactive</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    extra_installs <span class="op">=</span> [<span class="st">"sphinx-autobuild"</span>] <span class="cf">if</span> serve <span class="cf">else</span> []</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    session.install(<span class="st">"-e.[docs]"</span>, <span class="op">*</span>extra_installs)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    session.chdir(<span class="st">"docs"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>    shared_args <span class="op">=</span> (</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>        <span class="st">"-n"</span>,  <span class="co"># nitpicky mode</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>        <span class="st">"-T"</span>,  <span class="co"># full tracebacks</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>        <span class="st">"-b=html"</span>,</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>        <span class="st">"."</span>,</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>        <span class="ss">f"_build/html"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>        <span class="op">*</span>session.posargs,</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>    )</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>    <span class="cf">if</span> serve:</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>        session.run(<span class="st">"sphinx-autobuild"</span>, <span class="st">"--open-browser"</span>, <span class="op">*</span>shared_args)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>        session.run(<span class="st">"sphinx-build"</span>, <span class="st">"--keep-going"</span>, <span class="op">*</span>shared_args)</span></code></pre>
</div>
<p>And you now have working docs that you can generate and view cross
platform with <code>nox -s docs</code>!</p>
</section><section><h2 class="section-heading" id="read-the-docs">Read the Docs<a class="anchor" aria-label="anchor" href="#read-the-docs"></a>
</h2>
<hr class="half-width">
<p>If you want to use <a href="https://readthedocs.org" class="external-link uri">https://readthedocs.org</a> to build your docs, you’ll also
want the following <code>.readthedocs.yml</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="at">  </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="st">"ubuntu-22.04"</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">  </span><span class="fu">tools</span><span class="kw">:</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="at">    </span><span class="fu">python</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.11"</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">sphinx</span><span class="kw">:</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="at">  </span><span class="fu">configuration</span><span class="kw">:</span><span class="at"> docs/conf.py</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">python</span><span class="kw">:</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="at">  </span><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">method</span><span class="kw">:</span><span class="at"> pip</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="at">      </span><span class="fu">extra_requirements</span><span class="kw">:</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> docs</span></span></code></pre>
</div>
<div id="adding-a-page" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="adding-a-page" class="callout-inner">
<h3 class="callout-title">Adding a page</h3>
<div class="callout-content">
<p>Try adding a page. Remember to update your <code>index.md</code>
table of contents.</p>
</div>
</div>
</div>
<div id="readme-in-docs" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="readme-in-docs" class="callout-inner">
<h3 class="callout-title">Readme in docs</h3>
<div class="callout-content">
<p>If you want to include your readme in your docs, you can add
something like this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="in">```{include} ../README.md</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="in">:start-after: &lt;!-- SPHINX-START --&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>And you use <code>&lt;!-- SPHINX-START --&gt;</code> to mark where
you want your docs part of your <code>README.md</code> to start
(generally after the title and badges).</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu"># Example Package YOUR USERNAME HERE</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">&lt;!-- SPHINX-START --&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="in">`example-package-YOUR-USERNAME-HERE`</span> is a simple Python library that contains a single function for rescaling arrays.</span></code></pre>
</div>
</div>
</div>
</div>
<div id="selecting-a-nicer-theme" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="selecting-a-nicer-theme" class="callout-inner">
<h3 class="callout-title">Selecting a nicer theme</h3>
<div class="callout-content">
<p>A really nice theme, used by PyPA projects like pip and pipx, is
<code>furo</code>. To use it, add this line to your
<code>conf.py</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>html_theme <span class="op">=</span> <span class="st">"furo"</span></span></code></pre>
</div>
<p>And add <code>"furo"</code> to your <code>docs</code> extra in your
<code>pyproject.toml</code>.</p>
</div>
</div>
</div>
<div id="further-reading" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="further-reading" class="callout-inner">
<h3 class="callout-title">Further reading</h3>
<div class="callout-content">
<p>To see a more complete example, read <a href="https://learn.scientific-python.org/development/guides/docs/" class="external-link">Scientific-Python’s
docs guide</a>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Sphinx is great for documentation</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-documentation-mkdocs-material"><p>Content from <a href="documentation-mkdocs-material.html">Documentation with MkDocs</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/documentation-mkdocs-material.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I document my project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to set up documentation using Material for MkDocs</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this lesson, we’ll outline creating a documentation webpage using
the <a href="https://www.mkdocs.org/" class="external-link">MkDocs</a> framework with the <a href="https://squidfunk.github.io/mkdocs-material/" class="external-link">Material</a>
theme.</p>
<p>You will: - add the necessary dependencies to your
<code>pyproject.toml</code> file, - set up a basic documentation
directory, - create a configuration which comes with a table of contents
by default, - start a preview server, - add a page which includes a code
listing for your <code>rescale</code> function.</p>
<section><h2 class="section-heading" id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<hr class="half-width">
<p>Start by installing the <code>material-mkdocs</code> package into you
virtual environment.</p>
<p>Add this to <code>pyproject.toml</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">[project.optional-dependencies]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="dt">...</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="dt">docs</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="st">"mkdocs-material"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>… then reinstall using
<code>pip install --editable ".[docs]"</code>.</p>
<div id="doc-or-docs" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="doc-or-docs" class="callout-inner">
<h3 class="callout-title">
<code>doc</code> or <code>docs</code>
</h3>
<div class="callout-content">
<p>The <a href="https://packaging.python.org/en/latest/specifications/core-metadata/#provides-extra-multiple-use" class="external-link">python
packaging standard</a> for the name of this extra is <code>doc</code>,
whereas <code>docs</code> is ~3x more popular.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="template">Template<a class="anchor" aria-label="anchor" href="#template"></a>
</h2>
<hr class="half-width">
<p>Create an empty site using:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">mkdocs</span> new .</span></code></pre>
</div>
<p>This will create files and directories as follows:</p>
<pre><code>.
├─ docs/
│  └─ index.md
└─ mkdocs.yml</code></pre>
<ul>
<li>The <code>index.md</code> file will contain the content on the front
page of your documentation website.</li>
<li>The <code>mkdocs.yml</code> file is the configuration file for the
documentation.</li>
</ul></section><section><h2 class="section-heading" id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<hr class="half-width">
<p>In the <code>mkdocs.yml</code> file, set the site name and add some
additional lines to enable the theme:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Example Package YOUR USERNAME HERE</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">site_url</span><span class="kw">:</span><span class="at"> https://&lt;your github username&gt;.github.io/example-package-YOUR-USERNAME-HERE</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> material</span></span></code></pre>
</div>
<div id="site_url-is-important" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="site_url-is-important" class="callout-inner">
<h3 class="callout-title">
<code>site_url</code> is important</h3>
<div class="callout-content">
<p>It is important to set the <code>site_url</code> because it’s assumed
to be set by a number of plugins.</p>
<p>It’s set here to a <a href="https://pages.github.com/" class="external-link">GitHub
Pages</a> address – you can set it to
<code>https://&lt;your github username&gt;.github.io/example-package-YOUR-USERNAME-HERE</code>
or any other domain where you want to publish.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="preview">Preview<a class="anchor" aria-label="anchor" href="#preview"></a>
</h2>
<hr class="half-width">
<p>You can preview the site as you change it by running the “preview
server”:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">mkdocs</span> serve</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="update-index-md">Update <code>index.md</code>
<a class="anchor" aria-label="anchor" href="#update-index-md"></a>
</h2>
<hr class="half-width">
<p>And add (a correct) <code>docs/index.md</code> yourself:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">&lt;!--- docs/index.md --&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu"># Example Package YOUR USERNAME HERE</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="in">`example-package-YOUR-USERNAME-HERE`</span> is a simple Python library that contains a single function for rescaling arrays.</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="fu">## Installation</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>You can install the package by calling:</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="ex">pip</span> install git+https://github.com/<span class="op">&lt;</span>your github username<span class="op">&gt;</span>/example-package-YOUR-USERNAME-HERE</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="fu">## Usage</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="in">```python</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="im">from</span> example_package_YOUR_USERNAME_HERE.rescale <span class="im">import</span> rescale</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co"># rescales over 0 to 1</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>rescale(np.linspace(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<div id="readme.md-vs-index.md" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="readme.md-vs-index.md" class="callout-inner">
<h3 class="callout-title">
<code>README.md</code> vs
<code>index.md</code>
</h3>
<div class="callout-content">
<p>Often, similar information will be contained in the repository README
and the index page of the documentation – installation instructions,
basic usage, licensing etc., and so it’s common to want to include
(parts of) the README in the index page.</p>
<p>Sphinx has built-in tools to allow you to include parts of another
markdown file directly, but MkDocs doesn’t.</p>
<p>We’d recommend writing the <code>index.md</code> and
<code>README.md</code> files separately, so that you can vary the
information and instructions you present for the particular
audience.</p>
<p>For instance, someone viewing the repository can be expected to know
where to download the source code from, whereas someone viewing the
documentation website might not.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="add-code-reference">Add Code Reference<a class="anchor" aria-label="anchor" href="#add-code-reference"></a>
</h2>
<hr class="half-width">
<p>We’ll add a new page to the documentation with the docstrings from
the package.</p>
<ul>
<li>
<p>Add the <code>mkdocstrings</code> plugin to
<code>mkdocs.yml</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># mkdocs.yml</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">plugins</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">-</span><span class="at"> mkdocstrings</span></span></code></pre>
</div>
</li>
<li>
<p>Include the <code>mkdocstrings[python]</code> package in the
<code>docs</code> dependencies of the pyprojects.toml:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># pyproject.toml</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="kw">[project.optional-dependencies]</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="dt">docs</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="st">"mkdocs-material"</span><span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="st">"mkdocstrings[python]"</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
</li>
<li>
<p>Add a new page <code>docs/ref.md</code> with the content:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu"># Code Reference</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>::: example_package_YOUR_USERNAME_HERE.rescale</span></code></pre>
</div>
</li>
<li><p>Stop the preview server using
<kbd>Ctrl</kbd>-<kbd>C</kbd></p></li>
<li><p>Reinstall using <code>pip install --editable ".[docs]"</code>
since we added a new dependency</p></li>
<li><p>Reload the documentation preview using
<code>mkdocs serve</code></p></li>
</ul>
<p>MkDocs automatically adds the additional page to your
documentation.</p>
</section><section><h2 class="section-heading" id="publish-to-github-pages">Publish to GitHub Pages<a class="anchor" aria-label="anchor" href="#publish-to-github-pages"></a>
</h2>
<hr class="half-width">
<p>To publish the documentation to GitHub pages, run:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">mkdocs</span> gh-deploy</span></code></pre>
</div>
<p>The documentation will be made available at the URL
<code>https://&lt;your github username&gt;.github.io/example-package-YOUR-USERNAME-HERE</code></p>
<p>Once this is deployed, you can add an additional URL to the
<code>pyproject.toml</code> file, which will be included in the package
metadata and linked to on PyPI.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># pyproject.toml</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">[project.urls]</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="dt">Homepage</span> <span class="op">=</span> <span class="st">"https://&lt;your github username&gt;.github.io/example-package-YOUR-USERNAME-HERE"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="read-the-docs">Read The Docs<a class="anchor" aria-label="anchor" href="#read-the-docs"></a>
</h2>
<hr class="half-width">
<p>If you want to use <a href="https://readthedocs.org" class="external-link uri">https://readthedocs.org</a> to build your docs, you’ll need
to add a <code>.readthedocs.yml</code> file. Find details at <a href="https://docs.readthedocs.io/en/stable/config-file" class="external-link">https://docs.readthedocs.io/en/stable/config-file</a>.</p>
</section><section><h2 class="section-heading" id="challenges">Challenges<a class="anchor" aria-label="anchor" href="#challenges"></a>
</h2>
<hr class="half-width">
<div id="adding-a-page" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="adding-a-page" class="callout-inner">
<h3 class="callout-title">Adding a page</h3>
<div class="callout-content">
<p>Try adding another page.</p>
</div>
</div>
</div>
<div id="further-reading" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="further-reading" class="callout-inner">
<h3 class="callout-title">Further reading</h3>
<div class="callout-content">
<ul>
<li>
<a href="https://diataxis.fr/" class="external-link">https://diataxis.fr/</a> outlines an
excellent framework for planning documentation.</li>
<li>
<a href="https://squidfunk.github.io/mkdocs-material/" class="external-link">https://squidfunk.github.io/mkdocs-material/</a>
outlines all the options and many of the plugins available with Material
for MkDocs, including syntax highlighting, and making comprehensive code
listings for projects with many files.</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>MkDocs is great for documentation</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-checks"><p>Content from <a href="checks.html">Checks and tests</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/checks.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you ensure your code will work well?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about the basics of setting up tests.</li>
<li>Learn about the basics of setting up static checks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode we’ll give an introduction to setting up your project
for - tests with <code>pytest</code>, and - static checks (also known as
linters, formatters, and type checkers).</p>
<section><h2 class="section-heading" id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<hr class="half-width">
<p>The most popular testing framework is pytest, so we will focus on
that. Python has a built-in framework too, but it’s really intended for
Python’s own tests, and adding a dependency for testing only is fine
even for the most strict no-dependencies allowed packages, since users
don’t need tests. Tests should be as easy to write as possible, and
pytest handles that beautifully.</p>
<div class="section level3">
<h3 id="test-directory">Test directory<a class="anchor" aria-label="anchor" href="#test-directory"></a>
</h3>
<p>There are several options for test directory. The recommendation is
<code>/tests</code> (with an <code>s</code>), at the root of your
repository. Combined with <code>/src/&lt;package&gt;</code> layout, you
will have the best experience avoiding weird edge cases with package
importing.</p>
<div id="user-runnable-tests" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="user-runnable-tests" class="callout-inner">
<h3 class="callout-title">User runnable tests</h3>
<div class="callout-content">
<p>Tests should distributed with your SDist, but not your wheel.
Sometimes, you might want some simple Tests a user can run in order to
verify that their system works. Adding a
<code>/src/&lt;package&gt;/tests</code> module using Python’s
<code>unittest</code> that does some very quick checks to validate the
package works is fine (though it should not be your entire test
suite!).</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="pytest-configuration">Pytest configuration<a class="anchor" aria-label="anchor" href="#pytest-configuration"></a>
</h3>
<p>A recommended pytest configuration in your
<code>pyproject.toml</code> is:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">[tool.pytest.ini_options]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="dt">minversion</span> <span class="op">=</span> <span class="st">"7.0"</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="dt">addopts</span> <span class="op">=</span> <span class="op">[</span><span class="st">"-ra"</span><span class="op">,</span> <span class="st">"--showlocals"</span><span class="op">,</span> <span class="st">"--strict-markers"</span><span class="op">,</span> <span class="st">"--strict-config"</span><span class="op">]</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="dt">xfail_strict</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="dt">filterwarnings</span> <span class="op">=</span> <span class="op">[</span><span class="st">"error"</span><span class="op">]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="dt">log_cli_level</span> <span class="op">=</span> <span class="st">"info"</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dt">testpaths</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  <span class="st">"tests"</span><span class="op">,</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<ul>
<li>The <code>minversion</code> will print a nicer error if your
<code>pytest</code> is too old.</li>
<li>The <code>addopts</code> setting will add whatever you put there to
the command line when you run;
<ul>
<li>
<code>-ra</code> will print a summary “r”eport of “a”ll results,
which gives you a quick way to review what tests failed and were
skipped, and why.</li>
<li>
<code>--showlocals</code> will print locals in tracebacks.</li>
<li>
<code>--strict-markers</code> will make sure you don’t try to use an
unspecified fixture.</li>
<li>And <code>--strict-config</code> will error if you make a mistake in
your config.</li>
</ul>
</li>
<li>
<code>xfail_strict</code> will change the default for
<code>xfail</code> to fail the tests if it doesn’t fail - you can still
override locally in a specific xfail for a flaky failure.</li>
<li>
<code>filter_warnings</code> will cause all warnings to be errors
(you can add allowed warnings here too, see below).</li>
<li>
<code>log_cli_level</code> will report <code>INFO</code> and above
log messages on a failure.</li>
<li>Finally, <code>testpaths</code> will limit <code>pytest</code> to
just looking in the folders given - useful if it tries to pick up things
that are not tests from other directories.</li>
</ul>
<p><a href="https://docs.pytest.org/en/stable/customize.html" class="external-link">See the
docs</a> for more options.</p>
<p>pytest also checks the current and parent directories for a
<code>conftest.py</code> file. If it finds them, they will get run
outer-most to inner-most. These files let you add fixtures and other
pytest configurations (like hooks for test discovery, etc) for each
directory. For example, you could have a “mock” folder, and in that
folder, you could have a <code>conftest.py</code> that has a mock
fixture with <code>autouse=True</code>, then every test in that folder
will get this mock applied.</p>
<p>In general, do not place a <code>__init__.py</code> file in your
tests; there’s not often a reason to make the test directory importable,
and it can confuse package discovery algorithms. You can use
<code>pythonpath=["tests/utils"]</code> to allow you to import things
inside a <code>tests/utils</code> folder - though many things can be
added to <code>conftest.py</code> as fixtures.</p>
<p>Python hides important warnings by default, mostly because it’s
trying to be nice to users. If you are a developer, you don’t want it to
be “nice”. You want to find and fix warnings before they cause user
errors! Locally, you should run with <code>-Wd</code>, or set
<code>export PYTHONWARNINGS=d</code> in your environment. The
<code>pytest</code> warning filter “error” will ensure that
<code>pytest</code> will fail if it finds any warnings. You can list
warnings that should be hidden or just shown without becoming errors
using the syntax
<code>"&lt;action&gt;:Regex for warning message:Warning:package"</code>,
where <code>&lt;action&gt;</code> can tends to be <code>default</code>
(show the first time) or <code>ignore</code> (never show). The regex
matches at the beginning of the error unless you prefix it with
<code>.*</code>.</p>
</div>
</section><section><h2 class="section-heading" id="static-checks">Static checks<a class="anchor" aria-label="anchor" href="#static-checks"></a>
</h2>
<hr class="half-width">
<p>In addition to tests, which run your code, there are also static
checkers that look for problems or format your code without running it.
While tests only check the parts of the code you write tests for, and
only the things you specifically think to check, static checkers can
verify your entire codebase is free of certain classes of bugs. Unlike a
compiled language, like C, C++, or Rust, there is no required “compile”
step, so think of this like that - an optional step you can add that can
find things that don’t make sense, invalid syntax, etc.</p>
<div class="section level3">
<h3 id="ruff">Ruff<a class="anchor" aria-label="anchor" href="#ruff"></a>
</h3>
<p>Ruff is a Python linter (a tool used to flag programming errors,
bugs, stylistic errors and suspicious constructs) and code
formatter.</p>
<p>Ruff has recently exploded as the most popular linting tool for
Python, and it’s easy to see why. It’s tens to hundreds of times faster
than similar tools like flake8, and has dozens of popular flake8 plugins
and other tools (like isort and pyupgrade) all well maintained and
shipped in a single Rust binary. It is highly configurable in a modern
configuration format (in <code>pyproject.toml</code>!). And it supports
auto-fixes, something common outside of Python, but rare in the Python
space before now.</p>
<p>You’ll want a bit of configuration in your
<code>pyproject.toml</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">[tool.ruff]</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="dt">src</span> <span class="op">=</span> <span class="op">[</span><span class="st">"src"</span><span class="op">]</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="dt">lint.extend-select</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="st">"B"</span><span class="op">,</span>           <span class="co"># flake8-bugbear</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="st">"I"</span><span class="op">,</span>           <span class="co"># isort</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="st">"PGH"</span><span class="op">,</span>         <span class="co"># pygrep-hooks</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="st">"RUF"</span><span class="op">,</span>         <span class="co"># Ruff-specific</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="st">"UP"</span><span class="op">,</span>          <span class="co"># pyupgrade</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="op">]</span></span></code></pre>
</div>
<p>To use Ruff to check your code for style problems, run:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">pipx</span> run ruff check</span></code></pre>
</div>
<p>To use Ruff to format your code, run:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">pipx</span> run ruff format</span></code></pre>
</div>
<p>For examples of Ruff’s formatting, see <a href="https://docs.astral.sh/ruff/formatter/#philosophy" class="external-link">its
documentation</a>.</p>
<p>You can a more complete suggested config at the <a href="https://learn.scientific-python.org/development/guides/style/#ruff" class="external-link">Scientific-Python
Development Guide</a>.</p>
</div>
<div class="section level3">
<h3 id="mypy">MyPy<a class="anchor" aria-label="anchor" href="#mypy"></a>
</h3>
<p>The biggest advancement since the development of Python 3 has been
the addition of <em>optional</em> static typing. Static checks in Python
have a <em>huge</em> disadvantage vs. a more “production” focused
language like C++: you can’t tell what types things are most of the
time! For example, is this function well defined?</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> bit_count(x):</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="cf">return</span> x.bit_count()</span></code></pre>
</div>
<p>A static checker <em>can’t</em> tell you, since it depends on how it
is called. <code>bit_count("hello")</code> is an error, but you won’t
know that until it runs, hopefully in a test somewhere. However, now
contrast that with this version:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">def</span> bit_count(x: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="cf">return</span> x.bit_count()</span></code></pre>
</div>
<p>Now this is well defined; a type checker will tell you that this
function is valid (and it will even be able to tell you it is invalid if
you target any Python before 3.10, regardless of the version you are
using to run the check!), and it will tell you if you try to call it
with anything that’s not an <code>int</code>, anywhere - regardless if
the function is part of a test or not!</p>
<p>You do have to add static types to function signatures and a
<em>few</em> variable definitions (usually variables can be inferred
automatically), but the payoff is well worth it - a static type checker
can catch many things, and doesn’t require writing tests!</p>
<p>To run mypy, you can call:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">pipx</span> run mypy <span class="at">--python-executable</span> .venv/bin/python .</span></code></pre>
</div>
<ul>
<li>mypy needs the argument
<code>--python-executable .venv/bin/python</code> to access to the
version of the Python interpreter you are using for your project. It
uses this to get access to type information for imported packages (like
numpy).</li>
<li>You also need to give it a path to a directory containing files to
check, in this case <code>.</code>.</li>
</ul>
<p>You can learn about configuring mypy in the <a href="https://learn.scientific-python.org/development/guides/mypy/" class="external-link">Scientific-Python
Development Guide</a>.</p>
</div>
<div class="section level3">
<h3 id="the-pre-commit-framework">The pre-commit framework<a class="anchor" aria-label="anchor" href="#the-pre-commit-framework"></a>
</h3>
<p>There’s a tool called pre-commit that is used to run static checks.
(Technically it can run just about anything, but it’s designed around
speed and works best with checks that take under a couple of seconds -
perfect for static checks.)</p>
<p>You can install pre-commit with <code>pipx</code>, <code>pip</code>,
your favorite package manager, or even run it inside
<code>nox</code>.</p>
<p>You run pre-commit like this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">pre-commit</span> run <span class="at">--all-files</span></span></code></pre>
</div>
<p>This runs pre-commit on all files; the default is to just check
staged changes for speed. As you might have guessed from the name, you
can also make pre-commit run as a git pre-commit hook, with
<code>pre-commit install</code>. You can also keep your pre-commit
config up to date with <code>pre-commit autoupdate</code>.</p>
<p>You can add pre-commit checks inside a
<code>.pre-commit-config.yaml</code> file. There are some “standard”
checks most projects include:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">repos</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/pre-commit/pre-commit-hooks</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="at">    </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="st">"v4.6.0"</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="at">    </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> check-added-large-files</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> check-case-conflict</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> check-merge-conflict</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> check-symlinks</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> check-yaml</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> debug-statements</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> end-of-file-fixer</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> mixed-line-ending</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> requirements-txt-fixer</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> trailing-whitespace</span></span></code></pre>
</div>
<p>There are a few things to dissect here. First, we have a
<code>repos</code> table. This holds a list of git repositories
pre-commit will use. They each have <code>repo</code> (pointing at the
repo URL), a <code>rev</code>, which holds a <em>non-moving</em> tag
(pre-commit caches environments based on this tag), and a
<code>hooks</code> table that holds the hooks you want to use from that
repo.</p>
<p>You can look at the docs (or the <code>pre-commit-hooks.yaml</code>
file in the repo you are using!) to see what <code>id</code>’s you can
select. There are more options as well - in fact, every pre-defined
field can be overridden by providing the field when you use the
hook.</p>
<p>The checks above, from the first-part
<code>pre-commit/pre-commit-hooks</code> repo, are especially useful in
the “installed” mode (where only staged changes are checked).</p>
<p>To configure Ruff within <code>.pre-commit-config.yaml</code>, add
the following configuration:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/charliermarsh/ruff-pre-commit</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="at">  </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="st">"v0.5.2"</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> ruff</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="at">      </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"--fix"</span><span class="kw">,</span><span class="at"> </span><span class="st">"--show-fixes"</span><span class="kw">]</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> ruff-format</span></span></code></pre>
</div>
<p>To configure mypy within <code>.pre-commit-config.yaml</code>, add
the following configuration:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">repo</span><span class="kw">:</span><span class="at"> https://github.com/pre-commit/mirrors-mypy</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="at">    </span><span class="fu">rev</span><span class="kw">:</span><span class="at"> </span><span class="st">"v1.10.0"</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="at">    </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">id</span><span class="kw">:</span><span class="at"> mypy</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="at">        </span><span class="fu">files</span><span class="kw">:</span><span class="at"> src</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="at">        </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[]</span></span></code></pre>
</div>
<p>You will need to add <code>additional_dependencies: [numpy]</code> as
the pre-commit <code>mypy</code> runs in a separate virtual environment
which doesn’t have <code>numpy</code> installed.</p>
<pre><code>  hooks:
    - id: mypy
      files: src
      args: []
      additional_dependencies: [numpy]</code></pre>
<p>You need to add any other packages that have static types to
<code>additional_dependencies: [...]</code>.</p>
</div>
<div class="section level3">
<h3 id="going-further">Going further<a class="anchor" aria-label="anchor" href="#going-further"></a>
</h3>
<p>See the Style guide at <a href="https://learn.scientific-python.org/development/guides/style" class="external-link">Scientific-Python
Development Guide</a> for a lot more suggestions on static checking.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Run tests and static checks on your codebase.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-task-runners"><p>Content from <a href="task-runners.html">Task runners</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/task-runners.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can you ensure others run the same code you do?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use a task runner to manage environments and run code</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>A task runner is a tool that lets you specify a set of tasks via a
common interface.</p>
<p>Use of a task runner is optional, but can be helpful to: - make it
easy and simple for new contributors to run things, - make specialized
developer tasks easy, - avoid making single-use virtual environments for
docs and other rarely run tasks.</p>
<p>Task runner preferences are subjective and diverse. Different people
prefer different task runners because they are more flexible, simpler to
understand, specialized to one language, general to many languages, and
so on.</p>
<p>Examples we’ll cover include: - <a href="https://nox.thea.codes" class="external-link">nox</a> (Python semi-general), and - <a href="https://hatch.pypa.io/" class="external-link">hatch</a> (specialized for Python package
management).</p>
<p>There are many other task runners for different languages, including:
- <a href="https://www.gnu.org/software/make/" class="external-link">make</a> (fully general),
- <a href="https://www.pyinvoke.org" class="external-link">invoke</a> (Python general), and -
<a href="https://tox.readthedocs.io" class="external-link">tox</a> (Python packages).</p>
<div id="task-runner-as-crutch" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="task-runner-as-crutch" class="callout-inner">
<h3 class="callout-title">Task Runner as Crutch</h3>
<div class="callout-content">
<p>Task runners can be a crutch, allowing poor packaging practices to be
employed behind a custom script, and they can hide what is actually
happening.</p>
</div>
</div>
</div>
<div id="further-reading" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="further-reading" class="callout-inner">
<h3 class="callout-title">Further reading</h3>
<div class="callout-content">
<p>See the <a href="https://learn.scientific-python.org/development/guides/tasks/" class="external-link">Scientific
Python Development Guide page on task runners</a> for more
information.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="nox">Nox<a class="anchor" aria-label="anchor" href="#nox"></a>
</h2>
<hr class="half-width">
<p>Nox has two strong points that help with this concern. First, it is
very explicit, and even prints what it is doing as it operates. Unlike
the older tox, it does not have any implicit assumptions built-in.
Second, it has very elegant built-in support for both virtual and Conda
environments. This can greatly reduce new contributor friction with your
codebase.</p>
<p>A daily developer is not expected to use nox for simple tasks, like
running tests or linting. You should not rely on nox to make a task that
should be made simple and standard (like building a package)
complicated. You are not expected to use nox for linting on CI, or
sometimes even for testing on CI, even if those tasks are provided for
users. Nox is a few seconds slower than running directly in a custom
environment - but for new users and rarely run tasks, it is
<em>much</em> faster than explaining how to get setup or manually
messing with virtual environments. It is also highly reproducible,
creating and destroying the temporary environment each time by
default.</p>
<p>Since nox is an application, you should install it with
<code>pipx</code>. If you use Homebrew, you can install <code>nox</code>
with that (Homebrew isolates Python apps it distributes too, just like
pipx).</p>
<div class="section level3">
<h3 id="running-nox">Running nox<a class="anchor" aria-label="anchor" href="#running-nox"></a>
</h3>
<p>If you see a <code>noxfile.py</code> in a repository, that means nox
is supported. You can start by checking to see what the different tasks
(called <code>sessions</code> in nox) are provided by the noxfile
author. For example, if we do this on
<code>packaging.python.org</code>’s repository:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">nox</span> <span class="at">-l</span>  <span class="co"># or --list-sessions</span></span></code></pre>
</div>
<pre><code>Sessions defined in /github/pypa/packaging.python.org/noxfile.py:

- translation -&gt; Build the gettext .pot files.
- build -&gt; Make the website.
- preview -&gt; Make and preview the website.
- linkcheck -&gt; Check for broken links.

sessions marked with * are selected, sessions marked with - are skipped.</code></pre>
<p>{:.output}</p>
<p>You can see that there are several different sessions. You can run
them with <code>-s</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">nox</span> <span class="at">-s</span> preview</span></code></pre>
</div>
<p>Will build and start up a preview of the site.</p>
<p>If you need to pass options to the session, you can separate nox
options with and the session options with <code>--</code>,
e.g. <code>nox -s preview -- --quiet</code> to pass the
<code>--quiet</code> flag to the session named <code>preview</code>.</p>
</div>
<div class="section level3">
<h3 id="writing-a-noxfile">Writing a Noxfile<a class="anchor" aria-label="anchor" href="#writing-a-noxfile"></a>
</h3>
<p>For this example, we’ll need a minimal test file for pytest to run.
Let’s make this file in a local directory:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># test_nox.py</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="kw">def</span> test_runs():</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="cf">assert</span> <span class="va">True</span></span></code></pre>
</div>
<p>Let’s write our own noxfile. If you are familiar with pytest, this
should look familiar as well; it’s intentionally rather close to pytest.
We’ll make a minimal session that runs pytest:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># noxfile.py</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="im">import</span> nox</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">@nox.session</span>()</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="kw">def</span> tests(session):</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    session.install(<span class="st">"pytest"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    session.run(<span class="st">"pytest"</span>)</span></code></pre>
</div>
<p>A noxfile is valid Python, so we import nox. The session decorator
tells nox that this function is going to be a session. By default, the
name will be the function name, the description will be the function
docstring, it will run on the current version of Python (the one nox is
using), and it will make a virtual environment each time the session
runs, though all of this is changeable via keyword arguments to
session.</p>
<p>The session function will be given a <code>nox.Session</code> object
that has various useful methods. <code>.install</code> will install
things with pip, and <code>.run</code> will run a command in a session.
The <code>.run</code> command will print a warning if you use an
executable outside the virtual environment unless
<code>external=True</code> is passed. Errors will exit the session.</p>
<p>Let’s expand this a little:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># noxfile.py</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">import</span> nox</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="at">@nox.session</span>()</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="kw">def</span> tests(session: nox.Session) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">    Run our tests.</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    session.install(<span class="st">"pytest"</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    session.run(<span class="st">"pytest"</span>, <span class="op">*</span>session.posargs)</span></code></pre>
</div>
<p>This adds a type annotation to the session object, so that IDE’s and
type checkers can help you write the code in the function. There’s a
docstring, which will print out nice help text when a user lists the
sessions. And we pass through to pytest anything the user passes in via
<code>session.posargs</code>.</p>
<p>Let’s try running it:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">nox</span> <span class="at">-s</span> tests</span></code></pre>
</div>
<pre><code>nox &gt; Running session tests
nox &gt; Creating virtual environment (virtualenv) using python3.10 in .nox/tests
nox &gt; python -m pip install pytest
nox &gt; pytest
==================================== test session starts ====================================
platform darwin -- Python 3.10.5, pytest-7.1.2, pluggy-1.0.0
rootdir: /Users/henryschreiner/git/teaching/packaging
collected 1 item

test_nox.py .                                                                          [100%]

===================================== 1 passed in 0.05s =====================================
nox &gt; Session tests was successful.</code></pre>
<p>{:.output}</p>
<p>You can pass arguments through to the <code>session.run</code>
command by prefixing them with <code>--</code> on the command line. For
instance, to pass <code>--verbose</code> to pytest:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">nox</span> <span class="at">-s</span> tests <span class="at">--</span> <span class="at">--verbose</span></span></code></pre>
</div>
<p>If you have specified your test dependencies using an the
<code>test</code> extra, you can install all those dependencies more
simply:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="at">@nox.session</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">def</span> tests(session):</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    session.install(<span class="st">".[test]"</span>)  <span class="co"># this installs all of the dependencies</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    session.run(<span class="st">"pytest"</span>)</span></code></pre>
</div>
<div id="virtual-environments" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="virtual-environments" class="callout-inner">
<h3 class="callout-title">Virtual environments</h3>
<div class="callout-content">
<p>Nox is really just doing the same thing we would do manually (and
printing all the steps except the exact details of creating the virtual
environment. You can see the virtual environment in
<code>.nox/tests</code>! How would you activate this environment?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">.</span> .nox/tests/bin/activate</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="add-documentation-generation-to-your-task-runner-mkdocs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-documentation-generation-to-your-task-runner-mkdocs" class="callout-inner">
<h3 class="callout-title">Add documentation generation to your task runner (MkDocs)</h3>
<div class="callout-content">
<p>Add the commands do preview and build your MkDocs documentation using
<code>nox</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Add a session to your <code>noxfile.py</code> to generate docs:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># noxfile.py</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="im">import</span> nox</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="at">@nox.session</span>()</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">def</span> preview_docs(session: nox.Session):</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="co">"""Show the documentation preview."""</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    session.install(<span class="st">".[docs]"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    session.run(<span class="st">"mkdocs"</span>, <span class="st">"serve"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="at">@nox.session</span>()</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="kw">def</span> build_docs(session: nox.Session):</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>    <span class="co">"""Build the documentation."""</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>    session.install(<span class="st">".[docs]"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>    session.run(<span class="st">"mkdocs"</span>, <span class="st">"build"</span>)</span></code></pre>
</div>
<p>You now have working docs that you can generate and view cross
platform with <code>nox -s preview_docs</code>!</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="backends">Backends<a class="anchor" aria-label="anchor" href="#backends"></a>
</h3>
<p>It’s possible to use different backends than <code>venv</code> and
<code>pip</code> when running <code>nox</code>. <code>uv</code> is a
fast package installer and resolver, written in Rust and designed to be
a replacement for <code>pip</code>. Using it can lead to enormous
performance gains, which can be useful when you create and destroy
virtual environments with <code>nox</code> many times per day.</p>
<ul>
<li>
<p>Update the top of your <code>noxfile.py</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># noxfile.py</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="im">import</span> nox</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>nox.needs_version <span class="op">=</span> <span class="st">"&gt;=2024.3.2"</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>nox.options.default_venv_backend <span class="op">=</span> <span class="st">"uv"</span></span></code></pre>
</div>
</li>
<li><p>Install <code>uv</code> using your package manager (<a href="https://github.com/astral-sh/uv" class="external-link">installation
instructions</a>).</p></li>
</ul>
<p>You can also specify
<code>nox.options.default_venv_backend = "uv|virtualenv"</code> which
will fallback to <code>virtualenv</code> if <code>uv</code> is not
installed</p>
<div id="alternative-backends" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="alternative-backends" class="callout-inner">
<h3 class="callout-title">Alternative backends</h3>
<div class="callout-content">
<p>Try running your tests with the default <code>virtualenv</code> and
the <code>uv|virtualenv</code> backend.</p>
<p>How does the execution time change?</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="hatch">Hatch<a class="anchor" aria-label="anchor" href="#hatch"></a>
</h2>
<hr class="half-width">
<p>Hatch is a Python “Project Manager” which can: - build packages, -
manage virtual environments, - manage multiple python versions for a
project, - run tests using <code>pytest</code>, - run static analysis on
code using <code>ruff</code>, - <strong>execute scripts with specific
dependencies and python versions</strong> (this is the “task runner”
part) - publish packages to PyPI, - help bump version numbers of
packages, - use templates to create new python projects</p>
<p>To initialize an existing project for <code>hatch</code>, enter the
directory containing the project and run the following:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">hatch</span> new <span class="at">--init</span></span></code></pre>
</div>
<p>This will interactively guide you through the setup process.</p>
<p>To run tests using <code>hatch</code>, run the following:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">hatch</span> test</span></code></pre>
</div>
<p>This will: - create a python environment in which your tests will
run, then - run the tests.</p>
<p>Alongside built-in commands like <code>test</code>,
<code>hatch</code> allows adding custom scripts.</p>
<p>For instance, to add an environment and scripts for viewing and
publishing the Material for MkDocs documentation, you can add the
following lines to the <code>pyproject.toml</code> file:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">[tool.hatch.envs.doc]</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="dt">dependencies</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="st">"mkdocs-material"</span><span class="op">,</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="st">"mkdocstrings[python]"</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="kw">[tool.hatch.envs.doc.scripts]</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="dt">serve</span> <span class="op">=</span> <span class="st">"mkdocs serve --dev-addr localhost:8000"</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="dt">build</span> <span class="op">=</span> <span class="st">"mkdocs build --clean --strict --verbose"</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="dt">deploy</span> <span class="op">=</span> <span class="st">"mkdocs gh-deploy"</span></span></code></pre>
</div>
<p>This specifies a new environment <code>doc</code> with the
<code>mkdocs-material</code> and <code>mkdocstrings</code> dependencies
needed, and scripts <code>serve</code>, <code>build</code> and
<code>deploy</code> defined within that environment.</p>
<p>Then to view the documentation locally, run
<code>hatch run &lt;ENV&gt;:&lt;SCRIPT&gt;</code>, e.g.:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">hatch</span> run doc:serve</span></code></pre>
</div>
<p>to run the preview server, or</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">hatch</span> run doc:build</span></code></pre>
</div>
<p>to build the documentation, ready for deployment.</p>
<p>The key benefits here are that: - these scripts run within an
isolated environment, - the simple commands like
<code>hatch run doc:serve</code> allow the developer to use arguments
like <code>--dev-addr localhost:8000</code> without needing to remember
or think about them.</p>
<p>The developer must decide whether these benefits outweigh the added
complexity of an additional layer of abstraction, which will hinder
debugging if something goes wrong.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A task runner makes it easier to contribute to software</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-continuous-integration"><p>Content from <a href="continuous-integration.html">Continuous Integration</a></p>
<hr>
<p>Last updated on 2025-06-18 |

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/episodes/continuous-integration.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you ensure code keeps passing</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use a CI service to run your tests</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Developers often need to run some tasks every time they update code.
This might include running tests, or checking that the formatting
conforms to a style guide.</p>
<p>======== questions: - “How do you ensure code keeps passing”
objectives: - “Use a CI service to run your tests” keypoints: - “Set up
GitHub Actions on your project” - “Run your tests on multiple platforms
and with multiple Python versions” —</p>
<p>Developers often need to run some tasks every time they update code.
This might include running tests, or checking that the formatting
conforms to a style guide.</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>9daa45e1661bdd97637ab402d79599816dd04f3b:episodes/10-continuous-integration.md
Continuous Integration (CI) allows the developer to automate running
these kinds of tasks each time various “trigger” events occur on your
repository. For example, you can use CI to run a test suite on every
pull request.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>In this episode we will set up CI using GitHub Actions: - test the
code on every pull request or merge to main, - run those tests under
multiple versions of python, on Linux, Windows and macOS.</p>
<section><h2 class="section-heading" id="github-actions-workflows-directory">GitHub Actions <code>workflows</code> directory<a class="anchor" aria-label="anchor" href="#github-actions-workflows-directory"></a>
</h2>
<hr class="half-width">
<p>GitHub Actions is made up of workflows which consist of actions.
Workflows are files in the <code>.github/workflows</code> folder ending
in <code>.yml</code>.</p>
</section><section><h2 class="section-heading" id="triggers">Triggers<a class="anchor" aria-label="anchor" href="#triggers"></a>
</h2>
<hr class="half-width">
<p>Workflows start with triggers, which define when things run. Here are
three triggers:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span></code></pre>
</div>
<p>This will run on all pull requests and pushes to main. You can also
specify specific branches for pull requests instead of running on all
PRs (will run on PRs targeting those branches only).</p>
</section><section><h2 class="section-heading" id="running-unit-tests">Running unit tests<a class="anchor" aria-label="anchor" href="#running-unit-tests"></a>
</h2>
<hr class="half-width">
<p>Let’s set up a basic test. We will define a jobs dict, with a single
job named “tests”. For all jobs, you need to select an image to run on -
there are images for Linux, macOS, and Windows. We’ll use
<code>ubuntu-latest</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">  </span><span class="fu">tests</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v5</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.10"</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
<p>This has five steps:</p>
<ol style="list-style-type: decimal">
<li>Checkout the source (your repo).</li>
<li>Prepare Python 3.10 (will use a preinstalled version if possible,
otherwise will download a binary).</li>
<li>Install your package with testing extras - this is just an image
that will be removed at the end of the run, so “global” installs are
fine. We also provide a nice name for the step.</li>
<li>Run your package’s tests.</li>
</ol>
<p>By default, if any step fails, the run immediately quits and
fails.</p>
</section><section><h2 class="section-heading" id="running-in-a-matrix">Running in a matrix<a class="anchor" aria-label="anchor" href="#running-in-a-matrix"></a>
</h2>
<hr class="half-width">
<p>You can parametrize values, such as Python version or operating
system. Do do this, make a <code>strategy: matrix:</code> dict. Every
key in that dict (except <code>include:</code> and <code>exclude</code>
should be set with a list, and a job will be generated with every
possible combination of values. You can access these values via the
<code>matrix</code> variable; they do not “automatically” change
anything.</p>
<p>For example:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">example</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at">  </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">    </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">      </span><span class="fu">onetwothree</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="dv">1</span><span class="kw">,</span><span class="at"> </span><span class="dv">2</span><span class="kw">,</span><span class="at"> </span><span class="dv">3</span><span class="kw">]</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Job ${{ matrix.onetwothree }}</span></span></code></pre>
</div>
<p>would produce three jobs, with names <code>Job 1</code>,
<code>Job 2</code>, and <code>Job 3</code>. Elsewhere, if you refer to
the <code>example</code> job, it will implicitly refer to all three.</p>
<p>This is commonly used to set Python and operating system
versions:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="at">  </span><span class="fu">tests</span><span class="kw">:</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="at">      </span><span class="fu">fail-fast</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="at">        </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"3.8"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.11"</span><span class="kw">]</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="at">        </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">ubuntu-latest</span><span class="kw">,</span><span class="at"> windows-latest</span><span class="kw">,</span><span class="at"> macos-latest</span><span class="kw">]</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check Python ${{ matrix.python-version }} on ${{ matrix.runs-on }}</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ${{ matrix.runs-on }}</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="at">          </span><span class="fu">fetch-depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Python ${{ matrix.python-version }}</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v5</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> ${{ matrix.python-version }}</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install package</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pip install -e .[test]</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test package</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> python -m pytest</span></span></code></pre>
</div>
<p>There are two special keys: <code>include:</code> will take a list of
jobs to include one at a time. For example, you could add Python 3.9 on
Linux (but not the others):</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">include</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">3.9</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span></code></pre>
</div>
<p><code>include</code> can also list more keys than were present in the
original parametrization; this will add a key to an existing job.</p>
<p>The <code>exclude:</code> key does the opposite, and lets you remove
jobs from the matrix.</p>
</section><section><h2 class="section-heading" id="other-actions">Other actions<a class="anchor" aria-label="anchor" href="#other-actions"></a>
</h2>
<hr class="half-width">
<p>GitHub Actions has the concept of actions, which are just GitHub
repositories of the form <code>org/name@tag</code>, and there are lots
of useful actions to choose from (and you can write your own by
composing other actions, or you can also create them with JavaScript or
Dockerfiles). Here are a few:</p>
<p>There are some GitHub supplied ones:</p>
<ul>
<li>
<a href="https://github.com/actions/checkout" class="external-link">actions/checkout</a>:
Almost always the first action. v2+ does not keep Git history unless
<code>with: fetch-depth: 0</code> is included (important for SCM
versioning). v1 works on very old docker images.</li>
<li>
<a href="https://github.com/actions/setup-python" class="external-link">actions/setup-python</a>:
Do not use v1; v2+ can setup any Python, including uninstalled ones and
pre-releases. v4+ requires a Python version to be selected.</li>
<li>
<a href="https://github.com/actions/cache" class="external-link">actions/cache</a>: Can
store files and restore them on future runs, with a settable key.</li>
<li>
<a href="https://github.com/actions/upload-artifact" class="external-link">actions/upload-artifact</a>:
Upload a file to be accessed from the UI or from a later job.</li>
<li>
<a href="https://github.com/actions/download-artifact" class="external-link">actions/download-artifact</a>:
Download a file that was previously uploaded, often for releasing. Match
upload-artifact version.</li>
</ul>
<p>And many other useful ones:</p>
<ul>
<li>
<a href="https://github.com/ilammy/msvc-dev-cmd" class="external-link">ilammy/msvc-dev-cmd</a>:
Setup MSVC compilers.</li>
<li>
<a href="https://github.com/jwlawson/actions-setup-cmake" class="external-link">jwlawson/actions-setup-cmake</a>:
Setup any version of CMake on almost any image.</li>
<li>
<a href="https://github.com/wntrblm/nox" class="external-link">wntrblm/nox</a>: Setup all
versions of Python and provide nox.</li>
<li>
<a href="https://github.com/pypa/gh-action-pypi-publish" class="external-link">pypa/gh-action-pypi-publish</a>:
Publish Python packages to PyPI.</li>
<li>
<a href="https://github.com/pre-commit/action" class="external-link">pre-commit/action</a>: Run
pre-commit with built-in caching.</li>
<li>
<a href="https://github.com/conda-incubator/setup-miniconda" class="external-link">conda-incubator/setup-miniconda</a>:
Setup conda or mamba on GitHub Actions.</li>
<li>
<a href="https://github.com/ruby/setup-ruby" class="external-link">ruby/setup-miniconda</a> Setup
Ruby if you need it for something.</li>
</ul>
<div id="exercise" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Add a CI file for your package.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Set up GitHub Actions on your project</li>
<li>Run your tests on multiple platforms and with multiple Python
versions</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/INTERSECT-training/packaging/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/INTERSECT-training/packaging/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/INTERSECT-training/packaging/" class="external-link">Source</a></p>
				<p><a href="https://github.com/INTERSECT-training/packaging/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:icosden@princeton.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/intersect-training/varnish/tree/406bb97bab56e8a0c29f2f362164c5d4a05b7ee1" class="external-link">varnish (1.0.7.9000)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://INTERSECT-training.github.io/packaging/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://INTERSECT-training.github.io/packaging/aio.html",
  "identifier": "https://INTERSECT-training.github.io/packaging/aio.html",
  "dateCreated": "2025-07-15",
  "dateModified": "2025-07-15",
  "datePublished": "2025-07-15"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

